# ğŸ“š Omniscope â€” AI Plan for a Book Management TUI

> **ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ:** Yazi Ğ´Ğ»Ñ ĞºĞ½Ğ¸Ğ³. Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²Ñ‹Ğ¹ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ ĞºĞ½Ğ¸Ğ¶Ğ½Ğ¾Ğ¹ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸ Ñ ÑÑÑ‚ĞµÑ‚Ğ¸ĞºĞ¾Ğ¹, vim-Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ğ¼Ğ¸, AI-Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ°Ñ€ĞµĞ¼ Ğ¸ Ğ¼Ğ¾Ñ‰Ğ½Ñ‹Ğ¼ API.
> **Ğ Ğ°Ğ±Ğ¾Ñ‡ĞµĞµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ:** `omniscope`

---

## 0. Ğ¤Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„Ğ¸Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

| ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|---|---|
| **"ĞšĞ½Ğ¸Ğ³Ğ° = JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° + Ñ„Ğ°Ğ¹Ğ»"** | ĞšĞ°Ğ¶Ğ´Ğ°Ñ ĞºĞ½Ğ¸Ğ³Ğ° Ğ¶Ğ¸Ğ²Ñ‘Ñ‚ ĞºĞ°Ğº Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ. Ğ¤Ğ°Ğ¹Ğ» Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ĞµĞ½. |
| **"ĞÑ‚ĞºÑ€Ñ‹Ğ²Ğ°Ğ¹, Ğ½Ğµ Ñ‡Ğ¸Ñ‚Ğ°Ğ¹"** | ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° â€” Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€, Ğ½Ğµ Ñ€Ğ¸Ğ´ĞµÑ€. Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ. |
| **"AI â€” Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ°Ñ€ÑŒ, Ğ½Ğµ Ñ…Ğ¾Ğ·ÑĞ¸Ğ½"** | AI Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ¾Ğ²Ñ‹Ğ²Ğ°Ñ‚ÑŒ, Ğ½Ğ¾ Ğ½Ğµ Ğ½Ğ°Ğ²ÑĞ·Ñ‹Ğ²Ğ°ĞµÑ‚. Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞº Ğ² Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğµ. |
| **"Vim everywhere"** | Ğ’ÑÑ‘ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ¾Ğ¹, motions â€” ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚. |
| **"API â€” Ğ¿ĞµÑ€Ğ²Ğ¾ĞºĞ»Ğ°ÑÑĞ½Ñ‹Ğ¹ Ğ³Ñ€Ğ°Ğ¶Ğ´Ğ°Ğ½Ğ¸Ğ½"** | Ğ’ÑĞµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ Ñ‡ĞµÑ€ĞµĞ· API Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ². |
| **"CLI = Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ"** | AI-Ğ°Ğ³ĞµĞ½Ñ‚ Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ¾Ğ¼ Ğº Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»Ñƒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ’Ğ¡Ğ Ñ‚Ğ¾ Ğ¶Ğµ, Ñ‡Ñ‚Ğ¾ Ğ¸ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº Ğ² TUI. |
| **"ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ â€” Ğ½Ğµ ĞºĞ¾Ğ¼Ğ¿Ñ€Ğ¾Ğ¼Ğ¸ÑÑ"** | ĞšĞ°Ğ¶Ğ´Ğ°Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ±Ñ‹Ñ‚ÑŒ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ¹: Ñ…Ğ¾Ğ»Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ < 100ms, Ğ¿Ğ¾Ğ¸ÑĞº < 50ms. |

---

## 1. Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

### Ğ¯Ğ´Ñ€Ğ¾
```
omniscope/
â”œâ”€â”€ core/          [Rust]   â€” Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°, Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ, Ğ¿Ğ¾Ğ¸ÑĞº, API
â”œâ”€â”€ tui/           [Rust]   â€” ratatui-based Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
â”œâ”€â”€ ffi/           [C/C++]  â€” Ğ±Ğ¸Ğ½Ğ´Ğ¸Ğ½Ğ³Ğ¸ Ğº libmagic, poppler (Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ PDF)
â”œâ”€â”€ ai/            [Rust]   â€” AI-Ğ°Ğ³ĞµĞ½Ñ‚, Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹, JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸
â”œâ”€â”€ server/        [Rust]   â€” HTTP/WebSocket ÑĞµÑ€Ğ²ĞµÑ€ Ğ´Ğ»Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
â””â”€â”€ cli/           [Rust]   â€” omniscope CLI Ğ´Ğ»Ñ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ² Ğ¸ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
```

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (Rust)
| ĞšÑ€ĞµĞ¹Ñ‚ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|---|---|
| `ratatui` | TUI-Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³ |
| `crossterm` | ĞšÑ€Ğ¾ÑÑĞ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ğ²Ğ¾Ğ´ |
| `tantivy` | Full-text Ğ¿Ğ¾Ğ¸ÑĞº (Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³ Lucene) |
| `serde` / `serde_json` | JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ |
| `tokio` | Async runtime |
| `axum` | HTTP ÑĞµÑ€Ğ²ĞµÑ€ |
| `fuzzy-matcher` | Fuzzy Ğ¿Ğ¾Ğ¸ÑĞº Ã  la zoxide |
| `nucleo` | Ğ’Ñ‹ÑĞ¾ĞºĞ¾Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ fuzzy-matcher (Ğ¾Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ² Helix) |
| `skim` | Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ fuzzy selection |
| `notify` | ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ |
| `reqwest` | HTTP-ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Anna's Archive Ğ¸ ISBN API |
| `scraper` | HTML-Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ´Ğ»Ñ Ğ²ĞµĞ±-Ğ¿Ğ¾Ğ¸ÑĞºĞ° |
| `open` | ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸ÑÑ… |
| `dirs` | XDG-Ğ¿ÑƒÑ‚Ğ¸ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ° |

### C/C++ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
- **libmagic** â€” Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ MIME-Ñ‚Ğ¸Ğ¿Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
- **poppler-glib** â€” Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸Ğ· PDF (Ñ‡ĞµÑ€ĞµĞ· FFI)
- **libepub** â€” Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ EPUB-Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Ñ‡ĞµÑ€ĞµĞ· FFI)

---

## 2. Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 2.1 JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° ĞºĞ½Ğ¸Ğ³Ğ¸ (`BookCard`)

```json
{
  "id": "uuid-v7",
  "version": 1,
  "created_at": "2025-01-15T10:30:00Z",
  "updated_at": "2025-01-15T10:30:00Z",

  "metadata": {
    "title": "The Rust Programming Language",
    "subtitle": "Second Edition",
    "authors": ["Steve Klabnik", "Carol Nichols"],
    "year": 2023,
    "isbn": ["9781718503106"],
    "publisher": "No Starch Press",
    "language": "en",
    "pages": 560,
    "edition": 2,
    "series": null,
    "series_index": null
  },

  "file": {
    "path": "/books/rust/trpl.pdf",
    "format": "pdf",
    "size_bytes": 8453210,
    "hash_sha256": "abc123...",
    "added_at": "2025-01-15T10:30:00Z"
  },

  "organization": {
    "libraries": ["programming", "systems"],
    "folders": ["rust/official"],
    "tags": ["rust", "systems-programming", "beginner-friendly", "reference"],
    "rating": 5,
    "read_status": "read",
    "priority": "high",
    "custom_fields": {}
  },

  "ai": {
    "summary": "ĞÑ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ½Ğ¸Ğ³Ğ° Ğ¿Ğ¾ ÑĞ·Ñ‹ĞºÑƒ Rust Ğ¾Ñ‚ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ²...",
    "table_of_contents": [
      {"chapter": 1, "title": "Getting Started", "page": 1},
      {"chapter": 2, "title": "Programming a Guessing Game", "page": 15}
    ],
    "key_topics": ["ownership", "borrowing", "lifetimes", "traits", "async"],
    "difficulty": "beginner-to-intermediate",
    "ai_notes": "ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ´Ğ»Ñ Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ñ Rust...",
    "indexed_at": "2025-01-15T11:00:00Z",
    "index_version": 1,
    "embedding_model": "text-embedding-3-small",
    "embedding_stored": true
  },

  "web": {
    "openlibrary_id": "OL7353617M",
    "goodreads_id": null,
    "cover_url": "https://...",
    "sources": [
      {"name": "Anna's Archive", "url": "https://..."},
      {"name": "Open Library", "url": "https://..."}
    ]
  },

  "notes": [
    {
      "id": "note-uuid",
      "text": "Ğ“Ğ»Ğ°Ğ²Ğ° Ğ¿Ñ€Ğ¾ ownership â€” ĞºĞ»ÑÑ‡ĞµĞ²Ğ°Ñ",
      "created_at": "2025-01-15T12:00:00Z",
      "author": "human"
    }
  ]
}
```

### 2.2 Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸ Ğ½Ğ° Ğ´Ğ¸ÑĞºĞµ

```
~/.local/share/omniscope/
â”œâ”€â”€ config.toml                    # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³
â”œâ”€â”€ db/
â”‚   â”œâ”€â”€ cards/                     # JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸
â”‚   â”‚   â”œâ”€â”€ {uuid}.json
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ tantivy_index/             # Full-text Ğ¸Ğ½Ğ´ĞµĞºÑ
â”‚   â”œâ”€â”€ embeddings/                # Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ğµ ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ¸ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
â”‚   â””â”€â”€ omniscope.db               # SQLite Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
â”œâ”€â”€ libraries/
â”‚   â”œâ”€â”€ programming.toml           # ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸
â”‚   â””â”€â”€ fiction.toml
â”œâ”€â”€ covers/                        # ĞšÑÑˆ Ğ¾Ğ±Ğ»Ğ¾Ğ¶ĞµĞº
â”‚   â””â”€â”€ {uuid}.jpg
â””â”€â”€ frecency.db                    # Ğ‘Ğ°Ğ·Ğ° zoxide-like Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñ‹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
```

### 2.3 SQLite ÑÑ…ĞµĞ¼Ğ° (Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²)

```sql
-- Ğ”ĞµĞ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
CREATE TABLE books (
    id TEXT PRIMARY KEY,
    title TEXT,
    authors TEXT,         -- JSON array ĞºĞ°Ğº ÑÑ‚Ñ€Ğ¾ĞºĞ°
    year INTEGER,
    isbn TEXT,
    file_path TEXT,
    file_format TEXT,
    tags TEXT,            -- JSON array
    libraries TEXT,       -- JSON array
    folders TEXT,         -- JSON array
    read_status TEXT,
    rating INTEGER,
    summary TEXT,
    updated_at TEXT,
    frecency_score REAL DEFAULT 0.0
);

CREATE VIRTUAL TABLE books_fts USING fts5(
    title, authors, tags, summary, key_topics,
    content='books', content_rowid='rowid'
);

CREATE TABLE tags (
    id INTEGER PRIMARY KEY,
    name TEXT UNIQUE,
    color TEXT,
    description TEXT,
    book_count INTEGER DEFAULT 0
);

CREATE TABLE libraries (
    id TEXT PRIMARY KEY,
    name TEXT,
    description TEXT,
    icon TEXT,
    color TEXT
);
```

---

## 3. ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° TUI

### 3.1 ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½Ğ¾Ğ²ĞºĞ¸ â€” 5 Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ¾Ğ² (ĞºĞ°Ğº Ğ² vim)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NORMAL   INSERT   SEARCH   COMMAND   VISUAL                        â”‚
â”‚  [Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ] [Ñ€ĞµĞ´Ğ°ĞºÑ‚.] [telescope] [:]  [Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ó°‚º omniscope  [programming] > rust > official          [NORMAL] [AIâ—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LIBRARIES  â”‚  BOOK LIST                 â”‚  PREVIEW                  â”‚
â”‚             â”‚                            â”‚                           â”‚
â”‚ â–¶ All       â”‚ â–¶ The Rust Programming L.. â”‚  ğŸ“– The Rust Programming  â”‚
â”‚   Fiction   â”‚   â˜…â˜…â˜…â˜…â˜…  2023  pdf         â”‚     Language              â”‚
â”‚   Science   â”‚                            â”‚                           â”‚
â”‚ â— Program.  â”‚   Zero To Production in R  â”‚  Authors: Steve Klabnik   â”‚
â”‚   History   â”‚   â˜…â˜…â˜…â˜…â˜†  2022  epub        â”‚           Carol Nichols   â”‚
â”‚   Math      â”‚                            â”‚  Year:    2023            â”‚
â”‚             â”‚   Programming Rust, 2nd Ed â”‚  Pages:   560             â”‚
â”‚  TAGS       â”‚   â˜…â˜…â˜…â˜…â˜…  2021  pdf         â”‚  Tags:    #rust           â”‚
â”‚             â”‚                            â”‚           #systems        â”‚
â”‚ #rust [12]  â”‚   Rust for Rustaceans      â”‚           #beginner       â”‚
â”‚ #async  [5] â”‚   â˜…â˜…â˜…â˜…â˜†  2021  pdf         â”‚                           â”‚
â”‚ #systems[8] â”‚                            â”‚  Summary:                 â”‚
â”‚             â”‚                            â”‚  ĞÑ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ½Ğ¸Ğ³Ğ° Ğ¿Ğ¾     â”‚
â”‚  FOLDERS    â”‚                            â”‚  ÑĞ·Ñ‹ĞºÑƒ Rust Ğ¾Ñ‚ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹    â”‚
â”‚  rust/      â”‚                            â”‚  Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ² ÑĞ·Ñ‹ĞºĞ°...   â”‚
â”‚    official â”‚                            â”‚                           â”‚
â”‚    advanced â”‚                            â”‚  [o]pen [e]dit [a]i [?]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ ?:help  /:search  ss:sort  gf:goto-file  AI:@  q:quit              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Telescope-like Ğ¿Ğ¾Ğ¸ÑĞº (`:f` Ğ¸Ğ»Ğ¸ `/`)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”­ SEARCH                                         [fuzzy] [/regex] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  > rust async_                                                      â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚    Filter: [title] [author] [tag] [year] [all]                      â”‚
â”‚    Quick: @author:Klabnik  #tag:rust  y:2021-2023  f:pdf            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Results (4)                     â”‚  Preview                         â”‚
â”‚                                  â”‚                                  â”‚
â”‚  â–¶ Rust Async Book               â”‚  ğŸ“– Async Programming in Rust    â”‚
â”‚    #async #rust  online          â”‚                                  â”‚
â”‚                                  â”‚  The Async Book covers the       â”‚
â”‚    Programming Rust 2nd Ed       â”‚  foundations of async Rust,      â”‚
â”‚    #rust #systems  pdf  â˜…â˜…â˜…â˜…â˜…    â”‚  including futures, streams,     â”‚
â”‚                                  â”‚  and the Tokio runtime...        â”‚
â”‚    Async in Action               â”‚                                  â”‚
â”‚    #async #java  pdf  â˜…â˜…â˜…â˜†â˜†      â”‚  Tags: #rust #async #tokio       â”‚
â”‚                                  â”‚  Year: 2023  |  Pages: 180       â”‚
â”‚    Zero To Production            â”‚                                  â”‚
â”‚    #rust #web  epub  â˜…â˜…â˜…â˜…â˜…       â”‚  [Enter] open  [Tab] preview     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ¡Ğ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°:**
```
rust async              â†’ fuzzy Ğ¿Ğ¾ Ğ²ÑĞµĞ¼ Ğ¿Ğ¾Ğ»ÑĞ¼
@author:klabnik        â†’ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ñƒ
#tag:systems           â†’ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ñ‚ĞµĞ³Ñƒ
y:2020-2023            â†’ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ Ğ³Ğ¾Ğ´Ğ¾Ğ²
y:2023                 â†’ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ğ³Ğ¾Ğ´
f:pdf                  â†’ Ğ¿Ğ¾ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñƒ
lib:programming        â†’ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸
r:4+                   â†’ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ 4 Ğ¸ Ğ²Ñ‹ÑˆĞµ
s:unread               â†’ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ

# ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸:
@author:klabnik #tag:rust y:2023
rust systems r:4+ f:pdf s:unread
```

### 3.4 AI-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ (`:ai` Ğ¸Ğ»Ğ¸ `@`)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI LIBRARIAN                                      [claude-3.5]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Context: 47 books indexed | Library: programming                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AI: ĞŸÑ€Ğ¸Ğ²ĞµÑ‚! Ğ’Ğ°ÑˆĞ° Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ 47 ĞºĞ½Ğ¸Ğ³ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ.  â”‚
â”‚      Ğ¯ Ğ²Ğ¸Ğ¶Ñƒ 12 Ğ½ĞµĞ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ‹Ñ… ĞºĞ½Ğ¸Ğ³ Ğ¿Ğ¾ Rust. Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ñ      â”‚
â”‚      "The Rust Programming Language" â€” Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ».            â”‚
â”‚                                                                     â”‚
â”‚  You: Ğ½Ğ°Ğ¹Ğ´Ğ¸ Ğ¼Ğ½Ğµ Ñ‡Ñ‚Ğ¾-Ğ½Ğ¸Ğ±ÑƒĞ´ÑŒ Ğ¿Ğ¾ async rust, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğµ Ñ ĞµÑ‰Ñ‘ Ğ½Ğµ Ñ‡Ğ¸Ñ‚Ğ°Ğ»   â”‚
â”‚                                                                     â”‚
â”‚  AI: ĞĞ°ÑˆÑ‘Ğ» 3 ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ¿Ğ¾ async Rust ÑĞ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ¾Ğ¼ "unread":              â”‚
â”‚      1. "Async Rust" (2024) â€” Ğ½Ğ¾Ğ²ĞµĞ¹ÑˆĞ°Ñ, Ğ¾Ñ…Ğ²Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Tokio 1.0        â”‚
â”‚      2. "Zero to Production in Rust" â€” Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ async Ğ³Ğ»Ğ°Ğ²Ñ‹         â”‚
â”‚      3. "Programming Rust 2ed" â€” Ğ³Ğ»Ğ°Ğ²Ğ° 20 Ñ†ĞµĞ»Ğ¸ĞºĞ¾Ğ¼ Ğ¾Ğ± async          â”‚
â”‚                                                                     â”‚
â”‚      ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ»ÑĞ±ÑƒÑ Ğ¸Ğ· Ğ½Ğ¸Ñ…?                                          â”‚
â”‚                                                                     â”‚
â”‚  You: _                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Esc] close  [Tab] insert book ref  [@] mention book               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Vim Keybindings â€” Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°

### NORMAL mode

```toml
# ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ
j / k           = Ğ²Ğ½Ğ¸Ğ·/Ğ²Ğ²ĞµÑ€Ñ… Ğ¿Ğ¾ ÑĞ¿Ğ¸ÑĞºÑƒ
h / l           = Ğ¿ĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğ² Ğ»ĞµĞ²ÑƒÑ/Ğ¿Ñ€Ğ°Ğ²ÑƒÑ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ
gg / G          = Ğ¿ĞµÑ€Ğ²Ğ°Ñ/Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ ĞºĞ½Ğ¸Ğ³Ğ°
Ctrl+d / Ctrl+u = Ğ¿Ñ€Ğ¾ĞºÑ€ÑƒÑ‚ĞºĞ° Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑĞºÑ€Ğ°Ğ½Ğ°
{ / }           = Ğ¿Ñ€Ñ‹Ğ¶Ğ¾Ğº Ğ¿Ğ¾ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ°Ğ¼ (Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° â†’ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ°)

# Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ñ ĞºĞ½Ğ¸Ğ³Ğ¾Ğ¹
Enter / o       = Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ğ¾Ğ¼ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸
O               = Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñƒ Ğ´Ğ»Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ
e               = Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ
E               = Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ Ğ² $EDITOR
y               = ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿ÑƒÑ‚ÑŒ Ğº Ñ„Ğ°Ğ¹Ğ»Ñƒ
Y               = ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑÑ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ (JSON)
d               = ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ (Ñ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸ĞµĞ¼)
D               = ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» (ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ)
r               = Ğ¿ĞµÑ€ĞµĞ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ñ‚ÑŒ / Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº
x               = Ğ¿ĞµÑ€ĞµĞ¼ĞµÑÑ‚Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»

# ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
t               = Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµĞ³Ğ¸
T               = Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ³ (autocomplete)
m               = Ğ¿ĞµÑ€ĞµĞ¼ĞµÑÑ‚Ğ¸Ñ‚ÑŒ Ğ² Ğ¿Ğ°Ğ¿ĞºÑƒ/Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ
s               = Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ
R               = Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ (1-5)

# ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ¸ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ğ¸
-               = Ğ²Ğ²ĞµÑ€Ñ… Ğ¿Ğ¾ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸ (ĞºĞ°Ğº Ğ² yazi)
Enter (folder)  = Ğ²Ğ¾Ğ¹Ñ‚Ğ¸ Ğ² Ğ¿Ğ°Ğ¿ĞºÑƒ
gp              = Ğ¿ĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğº Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ¹ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞµ

# AI
@               = Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ AI-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ
@i              = AI: Ğ¿ĞµÑ€ĞµĞ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ ĞºĞ½Ğ¸Ğ³Ñƒ
@s              = AI: ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ summary Ğ´Ğ»Ñ ĞºĞ½Ğ¸Ğ³Ğ¸
@f              = AI: Ğ½Ğ°Ğ¹Ñ‚Ğ¸ ÑÑ‚Ñƒ ĞºĞ½Ğ¸Ğ³Ñƒ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½ (Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)

# ĞŸĞ¾Ğ¸ÑĞº Ğ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
/               = telescope Ğ¿Ğ¾Ğ¸ÑĞº
?               = telescope Ğ¿Ğ¾Ğ¸ÑĞº (Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ñ‹Ğ¹)
f               = Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ñ‚ĞµĞ³Ñƒ (Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¸Ğ· ÑĞ¿Ğ¸ÑĞºĞ°)
F               = Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞµ
ss              = ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° (submenu)
S               = Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸

# ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€
v               = Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ (visual mode)
V               = Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñƒ
Ctrl+a          = Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ²ÑĞµ
u               = ÑĞ½ÑÑ‚ÑŒ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°
a               = Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ (wizard)
A               = Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ğ· Ñ„Ğ°Ğ¹Ğ»Ğ°
I               = Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ¸Ğ· Zotero/Calibre
p               = Ğ²ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» (Ğ¸Ğ· Ğ±ÑƒÑ„ĞµÑ€Ğ°)

# ĞŸÑ€Ğ¾Ñ‡ĞµĞµ
:               = ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ°
q               = quit
Q               = quit Ğ±ĞµĞ· ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ
Ctrl+z          = undo
Ctrl+r          = redo
gh              = goto home (Ğ²ÑĞµ ĞºĞ½Ğ¸Ğ³Ğ¸)
gd              = goto downloads Ğ¿Ğ°Ğ¿ĞºĞ°
```

### ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ° (`:`)

```
:q              quit
:w              ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ
:wq             ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¸ Ğ²Ñ‹Ğ¹Ñ‚Ğ¸
:open {path}    Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»
:add {path}     Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ
:import zotero  Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ¸Ğ· Zotero
:import calibre Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ¸Ğ· Calibre
:tag {name}     ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚ĞµĞ³
:lib {name}     ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ
:ai             Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ AI-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ
:ai index all   Ğ¿ĞµÑ€ĞµĞ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑĞµ ĞºĞ½Ğ¸Ğ³Ğ¸
:server start   Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ÑĞµÑ€Ğ²ĞµÑ€ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
:sync           ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¼ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ¾Ğ¼
:search {query} Ğ¿Ğ¾Ğ¸ÑĞº (telescope)
:theme {name}   Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ¼Ñƒ
:set {key=val}  Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
```

---

## 5. AI-Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ

### 5.1 ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° AI-ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AI LIBRARIAN SYSTEM                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LIBRARY MAP â”‚  BOOK INDEX      â”‚  AI AGENT                        â”‚
â”‚              â”‚                  â”‚                                   â”‚
â”‚  ĞšĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ğ°Ñ  â”‚  ĞĞ° ĞºĞ°Ğ¶Ğ´ÑƒÑ ĞºĞ½Ğ¸Ğ³Ñƒ:â”‚  ĞŸÑ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹               â”‚
â”‚  ĞºĞ°Ñ€Ñ‚Ğ° Ğ²ÑĞµĞ¹  â”‚  - Summary       â”‚  Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Library Map           â”‚
â”‚  Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸  â”‚  - TOC           â”‚  Ğ”ĞµĞ»Ğ°ĞµÑ‚ Ñ‚Ğ¾Ñ‡ĞµÑ‡Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹          â”‚
â”‚  (~2-5K tok) â”‚  - Key topics    â”‚  Ğº Book Index                    â”‚
â”‚              â”‚  - Tags          â”‚  Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ JSON-Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ         â”‚
â”‚  JSON Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ â”‚                  â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Library Map (ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ´Ğ»Ñ AI)

ĞšĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ğ¾Ğµ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµĞ¹ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸ Ğ´Ğ»Ñ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ğ¸ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²:

```json
{
  "library_map": {
    "generated_at": "2025-01-15T10:00:00Z",
    "stats": {
      "total_books": 147,
      "read": 89,
      "unread": 45,
      "reading": 13,
      "formats": {"pdf": 98, "epub": 34, "djvu": 15}
    },
    "libraries": {
      "programming": {
        "count": 47,
        "top_tags": ["rust", "python", "algorithms", "systems"],
        "books": [
          {
            "id": "uuid",
            "t": "The Rust Programming Language",
            "a": ["Klabnik", "Nichols"],
            "y": 2023,
            "tags": ["rust", "beginner"],
            "s": "read",
            "r": 5,
            "f": "pdf"
          }
        ]
      }
    },
    "tag_cloud": {
      "rust": 12, "python": 8, "algorithms": 15, "async": 5
    }
  }
}
```

### 5.3 AI Actions API

AI-Ğ°Ğ³ĞµĞ½Ñ‚ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ:

```json
{
  "actions": [
    {
      "type": "update_card",
      "book_id": "uuid",
      "fields": {
        "metadata.title": "Corrected Title",
        "ai.summary": "New summary...",
        "organization.tags": ["rust", "async", "tokio"]
      }
    },
    {
      "type": "create_card",
      "data": { "...": "..." }
    },
    {
      "type": "search",
      "query": "rust async",
      "filters": {"tag": "systems", "year_min": 2020}
    },
    {
      "type": "open_book",
      "book_id": "uuid",
      "app": "zathura"
    },
    {
      "type": "show_message",
      "text": "ĞĞ°ÑˆÑ‘Ğ» 3 ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ¿Ğ¾ Ñ‚ĞµĞ¼Ğµ...",
      "books": ["uuid1", "uuid2"]
    }
  ]
}
```

### 5.4 ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ AI-Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ñ‹

```toml
# config.toml
[ai]
provider = "anthropic"        # anthropic | openai | ollama | gemini
model = "claude-3-5-sonnet-20241022"
api_key_env = "ANTHROPIC_API_KEY"
max_tokens = 4096
temperature = 0.1             # ĞĞ¸Ğ·ĞºĞ°Ñ Ñ‚ĞµĞ¼Ğ¿ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ° Ğ´Ğ»Ñ Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ñ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹

# Ğ”Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
[ai.ollama]
base_url = "http://localhost:11434"
model = "llama3.1:8b"

# Ğ›Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹ Ğ´Ğ»Ñ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ğ¸ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²
[ai.limits]
auto_index_on_add = true      # ĞĞ²Ñ‚Ğ¾Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸
max_summary_tokens = 500
library_map_refresh_interval = "1h"
```

### 5.5 Ğ˜Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ ĞºĞ½Ğ¸Ğ³Ğ¸ (workflow)

```
Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¸Ğ³Ğ¸ â†’ [1. Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‡ĞµÑ€ĞµĞ· libmagic/poppler]
                 â†’ [2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ±Ğ°Ğ·Ğ¾Ğ²ÑƒÑ JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ]
                 â†’ [3. AI: Ğ¾Ğ±Ğ¾Ğ³Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (ĞµÑĞ»Ğ¸ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾)]
                 â†’ [4. AI: ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ summary + TOC]
                 â†’ [5. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³]
                 â†’ [6. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ tantivy Ğ¸Ğ½Ğ´ĞµĞºÑ]
                 â†’ [7. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ SQLite]
                 â†’ [8. Ğ ĞµĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Library Map]
```

---

## 6. ĞŸĞ¾Ğ¸ÑĞº â€” Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

### 6.1 ĞœĞ½Ğ¾Ğ³Ğ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº

```
Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  QUERY PARSER                            â”‚
â”‚  "rust @author:klabnik y:2023 #systems"  â”‚
â”‚  â†’ Ñ‚Ğ¾ĞºĞµĞ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸ÑĞ°       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Ğ¢Ğ¸Ğ¿ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°?    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“            â†“            â†“
[Exact/SQL]  [Fuzzy]     [Semantic]
  SQLite     nucleo +     Embeddings
  FTS5       frecency     (optional)
    â†“            â†“            â†“
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
         [MERGE & RANK]
         Reciprocal Rank Fusion
                â†“
         [RESULTS Ñ Ğ¿Ñ€ĞµĞ²ÑŒÑ]
```

### 6.2 Zoxide-like frecency

```rust
// ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼: frecency = frequency * recency_weight
fn calculate_frecency(book: &Book, query: &str) -> f64 {
    let base_score = fuzzy_score(book.title, query);
    let access_count = book.access_count as f64;
    let days_ago = (now() - book.last_accessed).days() as f64;
    
    let recency = if days_ago < 4.0 { 6.0 }
                  else if days_ago < 14.0 { 4.0 }
                  else if days_ago < 31.0 { 2.0 }
                  else { 1.0 };
    
    base_score * (access_count * recency).sqrt()
}
```

### 6.3 Advanced filter DSL

```
# ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²:
title:"rust programming"     â†’ Ñ‚Ğ¾Ñ‡Ğ½Ğ°Ñ Ñ„Ñ€Ğ°Ğ·Ğ° Ğ² Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞµ
author~klabnik               â†’ fuzzy Ğ¿Ğ¾ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ñƒ
#tag AND #othertag           â†’ Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
NOT #python                  â†’ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
(#rust OR #cpp) #systems     â†’ ÑĞºĞ¾Ğ±ĞºĞ¸
y:>2020                      â†’ Ğ³Ğ¾Ğ´ Ğ¿Ğ¾ÑĞ»Ğµ 2020
y:2020..2023                 â†’ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½
pages:>200                   â†’ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ 200 ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†
r:>=4                        â†’ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ >= 4
has:file                     â†’ ĞµÑÑ‚ÑŒ Ğ¿Ñ€Ğ¸ĞºÑ€ĞµĞ¿Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ»
has:summary                  â†’ ĞµÑÑ‚ÑŒ AI-summary
lib:programming              â†’ Ğ² ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞµ
status:unread                â†’ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ
format:pdf,epub              â†’ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ²
added:>2024-01-01            â†’ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ¿Ğ¾ÑĞ»Ğµ Ğ´Ğ°Ñ‚Ñ‹
lang:ru                      â†’ ÑĞ·Ñ‹Ğº ĞºĞ½Ğ¸Ğ³Ğ¸
```

---

## 7. Anna's Archive Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ

### 7.1 Ğ’ĞµĞ±-ÑĞºÑ€ĞµĞ¹Ğ¿Ğ¸Ğ½Ğ³ (Ğ±ĞµĞ· Ğ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾Ğ³Ğ¾ API)

```rust
pub struct AnnaSearchResult {
    pub title: String,
    pub authors: Vec<String>,
    pub year: Option<i32>,
    pub isbn: Option<String>,
    pub format: String,
    pub size_mb: f64,
    pub language: String,
    pub download_url: Option<String>,  // ĞŸÑ€ÑĞ¼Ğ°Ñ ÑÑÑ‹Ğ»ĞºĞ° ĞµÑĞ»Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ°
    pub annas_url: String,             // Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ½Ğ° Anna's Archive
}

// ĞŸĞ¾Ğ¸ÑĞº Ñ‡ĞµÑ€ĞµĞ· Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ²ĞµĞ±-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
pub async fn search_annas_archive(query: &str) -> Result<Vec<AnnaSearchResult>> {
    let url = format!("https://annas-archive.org/search?q={}&ext=pdf,epub", 
                      urlenccode(query));
    let html = fetch_with_rate_limit(&url).await?;
    parse_search_results(&html)
}
```

### 7.2 Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ FIND ONLINE                                  [Anna's] [OpenLib] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  > The Rust Programming Language                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Anna's Archive (3 results)     â”‚  Open Library (1 result)          â”‚
â”‚                                  â”‚                                   â”‚
â”‚  â–¶ TRPL 2nd Ed - Klabnik 2023   â”‚  ğŸ“– TRPL 2nd Edition              â”‚
â”‚    PDF  12.4MB  EN  â˜…â˜…â˜…â˜…        â”‚  Open Library ID: OL7353617M      â”‚
â”‚                                  â”‚  [View] [Download metadata]       â”‚
â”‚    TRPL 2nd Ed - epub           â”‚                                   â”‚
â”‚    EPUB  2.1MB  EN  â˜…â˜…â˜…         â”‚                                   â”‚
â”‚                                  â”‚                                   â”‚
â”‚    TRPL 1st Ed - 2019           â”‚                                   â”‚
â”‚    PDF  8.2MB  EN  â˜…â˜…â˜…          â”‚                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [D] download  [M] import metadata only  [Esc] cancel               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```rust
pub enum MetadataSource {
    OpenLibrary,        // https://openlibrary.org/api/books
    GoogleBooks,        // API Ğ±ĞµĞ· ĞºĞ»ÑÑ‡Ğ° (Ğ»Ğ¸Ğ¼Ğ¸Ñ‚)
    IsbnDb,             // ĞŸĞ¾ ISBN
    WorldCat,           // ĞĞºĞ°Ğ´ĞµĞ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ
    AnnaSearchScrape,   // ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² Ğ¿Ğ¾Ğ¸ÑĞºĞ°
}

pub async fn enrich_metadata(card: &mut BookCard) {
    // ĞŸĞ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ¿Ñ€Ğ¾Ğ±ÑƒĞµĞ¼ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸
    for source in [OpenLibrary, GoogleBooks, IsbnDb] {
        if let Ok(meta) = fetch_metadata(card, source).await {
            card.merge_metadata(meta, source.priority());
            break;
        }
    }
}
```

---

## 8. Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ (Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²)

### 8.1 ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ñ‰Ğ¸ĞºĞ¾Ğ²

```toml
# config.toml
[viewers]
pdf  = "zathura"
epub = "zathura"
djvu = "zathura"
mobi = "foliate"
txt  = "$EDITOR"
html = "$BROWSER"

# ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ (Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ñ‡ĞµÑ€ĞµĞ· UI)
[viewers.alternatives]
pdf = ["zathura", "mupdf", "okular", "evince", "firefox"]

# Ğ”Ğ»Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ñ… Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞº
[viewers.overrides]
"library:manga" = "mcomix"
```

### 8.2 ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğ¼ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ (`O`)

```
  Open "The Rust Programming Language.pdf" with:
  
  â–¶ zathura          [default]
    mupdf
    okular  
    firefox
    custom...
```

---

## 9. Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ / Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚

### 9.1 ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ°

```rust
pub enum ImportFormat {
    Zotero {
        format: ZoteroFormat,  // RDF, JSON, BibTeX, CSV, RIS
        include_files: bool,
    },
    Calibre {
        library_path: PathBuf,  // metadata.db + Ñ„Ğ°Ğ¹Ğ»Ñ‹
    },
    BibTex(PathBuf),
    CsvCustom {
        path: PathBuf,
        column_mapping: HashMap<String, String>,
    },
    omniscopeJson(PathBuf),     // ĞĞ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚
    AnkiDeck(PathBuf),          // Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ ĞºĞ½Ğ¸Ğ¶Ğ½Ñ‹Ñ… ĞºĞ¾Ğ»Ğ¾Ğ´
}
```

### 9.2 Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚

```rust
pub enum ExportFormat {
    omniscopeJson,    // ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ±ÑĞºĞ°Ğ¿
    BibTex,
    Csv,
    Markdown,         // Ğ§Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº
    ZoteroRdf,
    CalibreLibrary,
    AnkiCards,        // Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ highlights/notes Ğ² Anki
}
```

---

## 10. Ğ¡ĞµÑ€Ğ²ĞµÑ€ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### 10.1 REST API ÑĞµÑ€Ğ²ĞµÑ€Ğ°

```
GET    /api/books              â†’ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… ĞºĞ½Ğ¸Ğ³
GET    /api/books/{id}         â†’ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° ĞºĞ½Ğ¸Ğ³Ğ¸
PUT    /api/books/{id}         â†’ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ  
POST   /api/books              â†’ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ
DELETE /api/books/{id}         â†’ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ

GET    /api/books/{id}/file    â†’ ÑĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» ĞºĞ½Ğ¸Ğ³Ğ¸
POST   /api/books/{id}/file    â†’ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»

GET    /api/search?q=...       â†’ Ğ¿Ğ¾Ğ¸ÑĞº
GET    /api/library-map        â†’ ĞºĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸

GET    /api/sync/status        â†’ ÑÑ‚Ğ°Ñ‚ÑƒÑ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
POST   /api/sync/push          â†’ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ
POST   /api/sync/pull          â†’ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ

WebSocket /ws/events           â†’ real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ
```

### 10.2 Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²ĞµÑ€Ğ°

```bash
# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¸Ğ· CLI
omniscope server start --port 8080 --auth-token $TOKEN

# Ğ˜Ğ»Ğ¸ Ğ¸Ğ· TUI
:server start 8080
```

### 10.3 Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ Ğ¿Ğ»Ğ°Ğ½ÑˆĞµÑ‚Ğ¾Ğ¼

```
ĞŸĞ»Ğ°Ğ½ÑˆĞµÑ‚/Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ â†’ HTTP client â†’ omniscope server
                              â†’ ÑĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» ĞºĞ½Ğ¸Ğ³Ğ¸
                              â†’ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ² Moon+ Reader / KOReader
                              â†’ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ
```

---

## 11. ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ API Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

### 11.1 CLI API (Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´)

```bash
# Ğ’ÑĞµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ÑÑ‚ --json Ğ´Ğ»Ñ Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ°

omniscope search "rust async" --json
omniscope book get {id} --json
omniscope book update {id} --set title="New Title" --json
omniscope book add --title "..." --author "..." --json
omniscope tag list --json
omniscope ai index {id}
omniscope ai summary {id}
omniscope library map --json   # Library Map Ğ´Ğ»Ñ AI ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°

# ĞŸĞ°Ğ¹Ğ¿-friendly
echo '{"query": "rust"}' | omniscope search --stdin
cat book.json | omniscope book import --stdin
```

### 11.2 MCP Server (Model Context Protocol)

```toml
# ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° MCP Ğ´Ğ»Ñ Claude Desktop, Claude Code, etc.
[server.mcp]
enabled = true
socket_path = "/tmp/omniscope.sock"

# Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ MCP Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹:
tools = [
  "search_books",
  "get_book_card",
  "update_book_card",
  "add_book",
  "get_library_map",
  "create_tag",
  "move_book",
  "get_reading_stats"
]
```

### 11.3 ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ MCP Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

```
Claude Code / Gemini CLI
        â†“
  MCP Protocol
        â†“
  omniscope MCP server
        â†“
  [search_books(query="rust async")]
        â†“
  Returns: BookCard[]
        â†“
  AI Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸
```

---

## 12. Ğ¢ĞµĞ¼Ğ° Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ñ â€” Ğ­ÑÑ‚ĞµÑ‚Ğ¸ĞºĞ°

### 12.1 Ğ¦Ğ²ĞµÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑÑ…ĞµĞ¼Ñ‹

```toml
# Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğµ Ñ‚ĞµĞ¼Ñ‹
[themes]
available = [
  "catppuccin-mocha",    # ĞœÑĞ³ĞºĞ¸Ğ¹ Ñ‚Ñ‘Ğ¼Ğ½Ñ‹Ğ¹
  "catppuccin-latte",    # Ğ¡Ğ²ĞµÑ‚Ğ»Ñ‹Ğ¹
  "gruvbox-dark",        # Ğ ĞµÑ‚Ñ€Ğ¾ Ñ‚Ñ‘Ğ¿Ğ»Ñ‹Ğ¹
  "tokyo-night",         # ĞĞµĞ¾Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚Ñ‘Ğ¼Ğ½Ñ‹Ğ¹
  "nord",                # Ğ¥Ğ¾Ğ»Ğ¾Ğ´Ğ½Ñ‹Ğ¹ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹
  "dracula",             # ĞšĞ»Ğ°ÑÑĞ¸ĞºĞ°
  "one-dark",
  "solarized-dark",
  "kanagawa",            # Ğ¯Ğ¿Ğ¾Ğ½ÑĞºĞ°Ñ ÑÑÑ‚ĞµÑ‚Ğ¸ĞºĞ°
  "rose-pine"            # ĞœÑĞ³ĞºĞ¸Ğ¹ Ñ€Ğ¾Ğ·Ğ¾Ğ²Ñ‹Ğ¹
]
default = "catppuccin-mocha"
```

### 12.2 UI Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸

```
â— Ğ˜ĞºĞ¾Ğ½ĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· Nerd Fonts: ó°‚º ğŸ“š ğŸ“– â˜… â— â–¶
â— ĞŸĞ»Ğ°Ğ²Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹ (Ğ³Ğ´Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ² TUI)
â— Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑ-Ğ±Ğ°Ñ€Ñ‹
â— Ğ¦Ğ²ĞµÑ‚Ğ¾Ğ²Ğ¾Ğµ ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Ñ‚ĞµĞ³Ğ¸, Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³, ÑÑ‚Ğ°Ñ‚ÑƒÑ
â— ĞĞ½Ğ¸Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ñ‡Ğ¸Ğº Ğ¿Ñ€Ğ¸ AI-Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸ÑÑ…
â— ĞšĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹ / Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ°
â— ĞœĞ¸Ğ½Ğ¸Ğ°Ñ‚ÑÑ€Ñ‹ Ğ¾Ğ±Ğ»Ğ¾Ğ¶ĞµĞº (Ñ‡ĞµÑ€ĞµĞ· Sixel/Kitty graphics protocol)
```

### 12.3 ĞĞ±Ğ»Ğ¾Ğ¶ĞºĞ¸ ĞºĞ½Ğ¸Ğ³

```rust
// ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»Ğ¾Ğ²
pub enum ImageProtocol {
    Kitty,          // Kitty terminal graphics
    Sixel,          // Ğ¨Ğ¸Ñ€Ğ¾ĞºĞ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°
    Iterm2,         // macOS iTerm2
    None,           // Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ ASCII art Ğ¾Ğ±Ğ»Ğ¾Ğ¶ĞºĞ°
}

// ASCII art fallback Ğ´Ğ»Ñ ĞºĞ½Ğ¸Ğ³ Ğ±ĞµĞ· Ğ¾Ğ±Ğ»Ğ¾Ğ¶ĞºĞ¸
fn ascii_book_cover(title: &str, author: &str) -> String {
    format!("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘ {:^12} â•‘\nâ•‘ {:^12} â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•", 
            truncate(title, 12), truncate(author, 12))
}
```

---

## 13. ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```toml
# ~/.config/omniscope/config.toml

[core]
library_path = "~/.local/share/omniscope"
books_directory = "~/Books"         # Ğ“Ğ´Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»Ñ‹
auto_import_directory = "~/Downloads"  # ĞĞ²Ñ‚Ğ¾Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ

[ui]
theme = "catppuccin-mocha"
image_protocol = "auto"             # auto | kitty | sixel | none
show_covers = true
list_style = "detailed"             # compact | detailed | card
default_sort = "added_desc"
panel_sizes = [20, 50, 30]          # % Ğ´Ğ»Ñ Ñ‚Ñ€Ñ‘Ñ… Ğ¿Ğ°Ğ½ĞµĞ»ĞµĞ¹
fuzzy_threshold = 0.6

[keybindings]
# ĞŸĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ĞºĞ»Ğ°Ğ²Ğ¸Ñˆ
open = "Enter"
edit = "e"
ai_panel = "@"
# ... Ğ²ÑĞµ ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ¸ Ğ¿ĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼Ñ‹

[ai]
provider = "anthropic"
model = "claude-3-5-sonnet-20241022"
api_key_env = "ANTHROPIC_API_KEY"
auto_index = true
auto_summary = false               # Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ summary Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸
library_map_cache = "1h"

[search]
fuzzy_engine = "nucleo"            # nucleo | skim
frecency_enabled = true
semantic_search = false            # Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ embeddings
highlight_matches = true

[viewers]
pdf = "zathura"
epub = "zathura"

[server]
enabled = false
port = 8080
host = "127.0.0.1"
auth_token_env = "omniscope_TOKEN"

[import]
auto_fetch_metadata = true
preferred_metadata_sources = ["openlibrary", "googlebooks"]

[plugins]
# Lua-Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ
enabled = true
directory = "~/.config/omniscope/plugins"
```

---

## 14. Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğº Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### 14.1 Ğ¦ĞµĞ»ĞµĞ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ)

| ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ | Ğ¦ĞµĞ»ĞµĞ²Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ | ĞœĞµÑ‚Ğ¾Ğ´ Ğ¸Ğ·Ğ¼ĞµÑ€ĞµĞ½Ğ¸Ñ |
|---|---|---|
| Ğ¥Ğ¾Ğ»Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ TUI | < 100ms | `hyperfine 'omniscope'` |
| Ğ¥Ğ¾Ğ»Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ CLI | < 30ms | `hyperfine 'omniscope list'` |
| Fuzzy Ğ¿Ğ¾Ğ¸ÑĞº (1000 ĞºĞ½Ğ¸Ğ³) | < 10ms | Benchmark Ğ² CI |
| Full-text Ğ¿Ğ¾Ğ¸ÑĞº (tantivy) | < 50ms | Benchmark Ğ² CI |
| Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¸Ğ³Ğ¸ (Ğ±ĞµĞ· AI) | < 200ms | Integration test |
| Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Library Map | < 20ms | Unit benchmark |
| Ğ ĞµĞ½Ğ´ĞµÑ€ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ°Ğ´Ñ€Ğ° TUI | < 8ms | Profiling |
| ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ | < 5ms | Unit benchmark |
| Ğ˜Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ ĞºĞ½Ğ¸Ğ³Ğ¸ (AI) | < 10s | Integration test |

### 14.2 Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

**Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°:**
```rust
// Lazy loading â€” Ğ½Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°Ñ‚ÑŒ Ğ²ÑÑ‘ ÑÑ€Ğ°Ğ·Ñƒ
pub struct Library {
    index: Arc<SearchIndex>,          // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ ÑÑ€Ğ°Ğ·Ñƒ (Ğ»Ñ‘Ğ³ĞºĞ¸Ğ¹)
    cards: DashMap<Uuid, BookCard>,   // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ Ğ»ĞµĞ½Ğ¸Ğ²Ğ¾
    covers: Arc<CoverCache>,          // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
}

// ĞŸÑ€ĞµĞ´ĞºĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ñ Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
pub struct PreparedQueries {
    by_tag: Statement,
    by_library: Statement,
    recent: Statement,
    unread: Statement,
}
```

**ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**
```toml
[cache]
library_map_ttl = "1h"         # Library Map Ğ¿ĞµÑ€ĞµÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ñ€Ğ°Ğ· Ğ² Ñ‡Ğ°Ñ
search_results_lru = 100       # LRU ĞºÑÑˆ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ñ… 100 Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ²
cover_cache_mb = 50            # ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 50MB Ğ´Ğ»Ñ Ğ¾Ğ±Ğ»Ğ¾Ğ¶ĞµĞº
frecency_persist_interval = "5m" # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑŒ frecency ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚
```

**Ğ˜Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ:**
```
â— tantivy Ğ¸Ğ½Ğ´ĞµĞºÑ Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ² memory-mapped Ñ„Ğ°Ğ¹Ğ»Ğ°Ñ… (mmap)
â— SQLite Ñ WAL mode â€” Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ±ĞµĞ· Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ¾Ğº
â— Ğ˜Ğ½ĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¸Ğ½Ğ´ĞµĞºÑĞ° â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ñ‘Ğ½Ğ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸
â— Background indexing â€” AI-Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ Ğ½Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
â— JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ñ‡Ğ¸Ñ‚Ğ°ÑÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· mmap Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞº
```

**Ğ ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³ TUI:**
```rust
// Dirty-flag Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³ â€” Ğ¿ĞµÑ€ĞµÑ€Ğ¸ÑĞ¾Ğ²Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ²ÑˆĞ¸ĞµÑÑ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
pub struct AppState {
    dirty: DirtyFlags,  // Ğ±Ğ¸Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ñ„Ğ»Ğ°Ğ³ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸
}

bitflags! {
    struct DirtyFlags: u8 {
        const SIDEBAR    = 0b00000001;
        const BOOK_LIST  = 0b00000010;
        const PREVIEW    = 0b00000100;
        const STATUSBAR  = 0b00001000;
        const SEARCH     = 0b00010000;
    }
}
```

### 14.3 ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ±ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€ĞºĞ¸

```
omniscope/
â”œâ”€â”€ benches/
â”‚   â”œâ”€â”€ search_bench.rs        # Criterion Ğ±ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€ĞºĞ¸ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
â”‚   â”œâ”€â”€ index_bench.rs         # Ğ‘ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€ĞºĞ¸ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ğ¸
â”‚   â”œâ”€â”€ startup_bench.rs       # Ğ’Ñ€ĞµĞ¼Ñ ÑÑ‚Ğ°Ñ€Ñ‚Ğ°
â”‚   â””â”€â”€ render_bench.rs        # TUI Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³
â””â”€â”€ profiling/
    â”œâ”€â”€ flamegraph.sh          # cargo flamegraph
    â””â”€â”€ heaptrack.sh           # ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
```

```bash
# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ±ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€ĞºĞ¾Ğ²
cargo bench --bench search_bench

# Flamegraph Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ
cargo flamegraph --bin omniscope -- search "rust"

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ĞµĞ³Ñ€ĞµÑÑĞ¸Ğ¹ Ğ² CI
cargo bench -- --save-baseline main
```

---

## 15. AI Agent CLI Interface â€” ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¡Ğ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

> **ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿:** AI-Ğ°Ğ³ĞµĞ½Ñ‚ (Claude Code, Gemini CLI, Ğ»ÑĞ±Ğ¾Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚ Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ¾Ğ¼ Ğº bash) Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑƒĞ¼ĞµÑ‚ÑŒ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· `omniscope` CLI Ñ€Ğ¾Ğ²Ğ½Ğ¾ Ñ‚Ğ¾ Ğ¶Ğµ ÑĞ°Ğ¼Ğ¾Ğµ, Ñ‡Ñ‚Ğ¾ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· TUI. Ğ‘ĞµĞ· Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹.

### 15.1 ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° CLI Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

```
AI Agent (Claude Code / Gemini CLI / custom)
         |
         | bash ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            omniscope CLI                        â”‚
â”‚                                              â”‚
â”‚  ĞšĞ°Ğ¶Ğ´Ğ°Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°:                             â”‚
â”‚  â— --json â†’ Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´             â”‚
â”‚  â— --quiet â†’ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚, Ğ±ĞµĞ· Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ° â”‚
â”‚  â— --dry-run â†’ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ±ÑƒĞ´ĞµÑ‚ ÑĞ´ĞµĞ»Ğ°Ğ½Ğ¾    â”‚
â”‚  â— exit codes â†’ 0=ÑƒÑĞ¿ĞµÑ…, 1=Ğ¾ÑˆĞ¸Ğ±ĞºĞ°, 2=Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ â”‚
â”‚  â— stderr â†’ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ¸ Ğ»Ğ¾Ğ³Ğ¸                  â”‚
â”‚  â— stdout â†’ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (JSON Ğ¸Ğ»Ğ¸ Ñ‚ĞµĞºÑÑ‚)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   |
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“                    â†“
   omniscope-core          HTTP API
   (Ğ¿Ñ€ÑĞ¼Ğ¾Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿)         (ĞµÑĞ»Ğ¸ ÑĞµÑ€Ğ²ĞµÑ€ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½)
```

### 15.2 ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ CLI Reference

#### Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ ĞºĞ½Ğ¸Ğ³Ğ°Ğ¼Ğ¸

```bash
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ĞŸĞĞ˜Ğ¡Ğš Ğ˜ ĞŸĞ ĞĞ¡ĞœĞĞ¢Ğ 
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… ĞºĞ½Ğ¸Ğ³
omniscope list
omniscope list --json
omniscope list --format "{id} {title} {author} {year}"

# ĞŸĞ¾Ğ¸ÑĞº (Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ DSL)
omniscope search "rust async"
omniscope search "@author:klabnik #rust y:2020-2023" --json
omniscope search "systems programming" --limit 10 --json
omniscope search --tag rust --status unread --format pdf --json
omniscope search --all   # Ğ²ÑĞµ ĞºĞ½Ğ¸Ğ³Ğ¸, json

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½ÑƒÑ ĞºĞ½Ğ¸Ğ³Ñƒ
omniscope book get {id}
omniscope book get {id} --json
omniscope book get {id} --field metadata.title
omniscope book get {id} --field ai.summary

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ğ¼ Ğ¿Ğ¾Ğ»ÑĞ¼ ÑÑ€Ğ°Ğ·Ñƒ
omniscope book get {id} --fields id,title,authors,tags --json

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ĞºĞ½Ğ¸Ğ³
omniscope book get {id1} {id2} {id3} --json

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ”ĞĞ‘ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» (Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ·Ğ²Ğ»ĞµĞºĞ°ÑÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸)
omniscope add /path/to/book.pdf --json
omniscope add /path/to/book.epub --library programming --json

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ ÑĞ²Ğ½Ñ‹Ğ¼Ğ¸ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
omniscope add /path/to/book.pdf \
  --title "The Rust Programming Language" \
  --author "Steve Klabnik" \
  --author "Carol Nichols" \
  --year 2023 \
  --tag rust --tag systems \
  --library programming \
  --json

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ Ğ±ĞµĞ· Ñ„Ğ°Ğ¹Ğ»Ğ° (Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ½Ğ¸Ğ³Ğ°)
omniscope add --no-file \
  --title "Ğ”ÑĞ½Ğ°" \
  --author "Ğ¤Ñ€ÑĞ½Ğº Ğ“ĞµÑ€Ğ±ĞµÑ€Ñ‚" \
  --year 1965 \
  --tag "sci-fi" --tag "classic" \
  --json

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ğ· JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸
omniscope add --from-json card.json
cat card.json | omniscope add --from-stdin --json

# ĞŸĞ°ĞºĞµÑ‚Ğ½Ğ¾Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
omniscope add --batch /path/to/books/ --recursive --json
omniscope add --batch --from-list paths.txt --json

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ˜Ğ•
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğµ(Ñ)
omniscope book update {id} --set title="New Title" --json
omniscope book update {id} \
  --set metadata.year=2024 \
  --set organization.rating=5 \
  --json

# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ÑÑ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ Ğ¸Ğ· JSON
omniscope book update {id} --from-json updated.json
cat updated.json | omniscope book update {id} --from-stdin

# Patch (merge, Ğ½Ğµ replace)
omniscope book patch {id} --json '{"organization": {"rating": 5}}'

# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ĞºĞ½Ğ¸Ğ³
omniscope book update --query "#rust" --set organization.rating=4 --json

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ/ÑƒĞ±Ñ€Ğ°Ñ‚ÑŒ Ñ‚ĞµĞ³
omniscope book tag add {id} "new-tag" --json
omniscope book tag remove {id} "old-tag" --json
omniscope book tag set {id} "tag1" "tag2" "tag3" --json  # Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ñ‚ĞµĞ³Ğ¸

# ĞŸĞµÑ€ĞµĞ¼ĞµÑÑ‚Ğ¸Ñ‚ÑŒ Ğ² Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ/Ğ¿Ğ°Ğ¿ĞºÑƒ
omniscope book move {id} --library fiction --json
omniscope book move {id} --folder "sci-fi/classics" --json

# Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ
omniscope book status {id} read
omniscope book status {id} unread
omniscope book status {id} reading --json

# Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³
omniscope book rate {id} 5 --json

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºÑƒ
omniscope book note add {id} "Ğ˜Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ğ°Ñ Ğ³Ğ»Ğ°Ğ²Ğ° Ğ¿Ñ€Ğ¾ ownership"
omniscope book note add {id} --from-stdin   # Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¸Ğ· stdin

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ£Ğ”ĞĞ›Ğ•ĞĞ˜Ğ•
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ (Ñ„Ğ°Ğ¹Ğ» Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ)
omniscope book delete {id} --json
omniscope book delete {id} --confirm  # Ğ±ĞµĞ· Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ

# Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» (ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ)
omniscope book delete {id} --file-only --json

# Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ²ÑÑ‘
omniscope book delete {id} --all --json

# ĞŸĞ°ĞºĞµÑ‚Ğ½Ğ¾Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ
omniscope book delete --query "#tag:temp" --confirm --json
```

#### Ğ¢ĞµĞ³Ğ¸ Ğ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸

```bash
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ¢Ğ•Ğ“Ğ˜
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

omniscope tag list --json                    # Ğ²ÑĞµ Ñ‚ĞµĞ³Ğ¸ Ñ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾Ğ¼ ĞºĞ½Ğ¸Ğ³
omniscope tag get rust --json               # Ğ¸Ğ½Ñ„Ğ¾ Ğ¾ Ñ‚ĞµĞ³Ğµ + ĞºĞ½Ğ¸Ğ³Ğ¸
omniscope tag create "new-tag" --color "#ff6b6b" --json
omniscope tag rename "old" "new" --json
omniscope tag delete "old-tag" --json
omniscope tag merge "tag1" "tag2" --into "merged" --json  # Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ³Ğ¸
omniscope tag stats --json                  # ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ Ñ‚ĞµĞ³Ğ°Ğ¼

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ‘Ğ˜Ğ‘Ğ›Ğ˜ĞĞ¢Ğ•ĞšĞ˜
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

omniscope library list --json
omniscope library get programming --json
omniscope library create "new-lib" --description "..." --json
omniscope library rename "old" "new" --json
omniscope library delete "lib-name" --json
omniscope library stats --json              # ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ĞŸĞĞŸĞšĞ˜ (Ğ¸ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

omniscope folder list --library programming --json
omniscope folder create "rust/advanced" --library programming --json
omniscope folder delete "rust/old" --json
omniscope folder rename "rust/advanced" "rust/expert" --json
```

#### AI ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# AI Ğ‘Ğ˜Ğ‘Ğ›Ğ˜ĞĞ¢Ğ•ĞšĞĞ Ğ¬
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Library Map (ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ´Ğ»Ñ AI)
omniscope ai map --json                     # ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°
omniscope ai map --library programming --json  # ĞšĞ°Ñ€Ñ‚Ğ° Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸
omniscope ai map --compact --json           # ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ ÑĞ¶Ğ°Ñ‚Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ

# Ğ˜Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ (AI Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ summary, TOC, Ñ‚ĞµĞ¼Ñ‹)
omniscope ai index {id} --json
omniscope ai index {id} --force --json      # ĞŸĞµÑ€ĞµĞ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ¶Ğµ ĞµÑĞ»Ğ¸ ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾
omniscope ai index --all --json             # Ğ’ÑĞµ Ğ½ĞµĞ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ½Ğ¸Ğ³Ğ¸
omniscope ai index --all --force --json     # ĞŸĞµÑ€ĞµĞ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑÑ‘

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ summary ĞºĞ½Ğ¸Ğ³Ğ¸
omniscope ai summary {id}                   # Ğ¢ĞµĞºÑÑ‚
omniscope ai summary {id} --json           # JSON Ñ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ TOC ĞºĞ½Ğ¸Ğ³Ğ¸
omniscope ai toc {id} --json

# AI Ğ¿Ğ¾Ğ¸ÑĞº (ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹/ÑƒĞ¼Ğ½Ñ‹Ğ¹)
omniscope ai search "Ñ‡Ñ‚Ğ¾ Ğ¿Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ concurrency" --json
omniscope ai search "best unread books on systems" --limit 5 --json

# AI Ğ¾Ğ±Ğ¾Ğ³Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
omniscope ai enrich {id} --json             # ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½ + Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ
omniscope ai enrich --all --json            # Ğ’ÑĞµ ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ±ĞµĞ· complete metadata

# AI ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ/Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸
omniscope ai card {id} --json               # AI Ğ¿ĞµÑ€ĞµĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ²ÑÑ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ
omniscope ai card {id} --section metadata --json  # Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ

# Ğ§Ğ°Ñ‚ Ñ AI (Ğ´Ğ»Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ñ pipe)
echo "Ğ½Ğ°Ğ¹Ğ´Ğ¸ Ğ¼Ğ½Ğµ Ğ²ÑĞµ Ğ½ĞµĞ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ¿Ğ¾ Rust" | omniscope ai chat --json
omniscope ai chat "reorganize my rust books into subfolders by topic" --dry-run --json
omniscope ai chat "add tags to all untagged books" --execute --json

# Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ğ¸
omniscope ai status --json                  # Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ĞºĞ½Ğ¸Ğ³ Ğ¿Ñ€Ğ¾Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾
```

#### Ğ’ĞµĞ± Ğ¸ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚/ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚

```bash
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ĞĞĞ›ĞĞ™Ğ ĞŸĞĞ˜Ğ¡Ğš
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞŸĞ¾Ğ¸ÑĞº ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½
omniscope web search "The Rust Programming Language klabnik" --json
omniscope web search --isbn "9781718503106" --json

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· ÑĞµÑ‚Ğ¸
omniscope web metadata {id} --json          # ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¸Ğ· ÑĞµÑ‚Ğ¸
omniscope web cover {id}                    # Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¾Ğ±Ğ»Ğ¾Ğ¶ĞºÑƒ
omniscope web sources "rust programming" --json  # ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸ Ğ½Ğ° Anna's Archive

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ˜ĞœĞŸĞĞ Ğ¢
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

omniscope import zotero library.json --json
omniscope import zotero library.rdf --json
omniscope import calibre /path/to/calibre/library --json
omniscope import bibtex refs.bib --json
omniscope import csv books.csv --mapping title=Title,author=Author --json

# Dry-run Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ°
omniscope import zotero library.json --dry-run --json

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ­ĞšĞ¡ĞŸĞĞ Ğ¢
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

omniscope export json --output backup.json
omniscope export bibtex --output refs.bib
omniscope export csv --output books.csv
omniscope export markdown --output library.md
omniscope export --query "#rust" --format json  # Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ¾
```

#### Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ Ğ˜ Ğ£Ğ¢Ğ˜Ğ›Ğ˜Ğ¢Ğ«
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
omniscope stats --json                      # ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸
omniscope stats --library programming --json
omniscope stats --tags --json               # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ñ‚ĞµĞ³Ğ¾Ğ²
omniscope stats --formats --json            # Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ²

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ†ĞµĞ»Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸
omniscope check --json                      # ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ñ‹
omniscope check --fix --json               # ĞĞ²Ñ‚Ğ¾Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹

# Ğ˜Ğ½Ğ´ĞµĞºÑ
omniscope index rebuild --json             # ĞŸĞµÑ€ĞµÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ tantivy Ğ¸Ğ½Ğ´ĞµĞºÑ
omniscope index status --json              # Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°

# Ğ¡ĞµÑ€Ğ²ĞµÑ€
omniscope server start --port 8080 --daemon --json
omniscope server stop --json
omniscope server status --json

# ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
omniscope config get --json
omniscope config set ai.provider anthropic
omniscope config set ai.model "claude-3-5-sonnet-20241022"

# Ğ’ĞµÑ€ÑĞ¸Ñ Ğ¸ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°
omniscope --version --json
omniscope doctor --json                     # ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ (Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ñ‹, Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹, ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³)
```

### 15.3 Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ñ‹ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ° Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

#### Ğ£ÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚

```json
{
  "status": "ok",
  "command": "book.get",
  "timestamp": "2025-01-15T10:30:00Z",
  "data": {
    "id": "uuid",
    "metadata": { "...": "..." }
  }
}
```

#### ĞÑˆĞ¸Ğ±ĞºĞ°

```json
{
  "status": "error",
  "command": "book.update",
  "timestamp": "2025-01-15T10:30:00Z",
  "error": {
    "code": "BOOK_NOT_FOUND",
    "message": "Book with id 'abc123' not found",
    "hint": "Use 'omniscope list --json' to see all book IDs"
  }
}
```

#### ĞŸĞ°ĞºĞµÑ‚Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚

```json
{
  "status": "ok",
  "command": "book.update.batch",
  "data": {
    "total": 15,
    "succeeded": 14,
    "failed": 1,
    "results": [
      {"id": "uuid1", "status": "updated"},
      {"id": "uuid2", "status": "error", "error": "..."}
    ]
  }
}
```

#### Dry-run Ğ¾Ñ‚Ğ²ĞµÑ‚

```json
{
  "status": "dry-run",
  "command": "ai.chat",
  "data": {
    "plan": [
      {"action": "create_folder", "path": "rust/async"},
      {"action": "move_book", "id": "uuid1", "to": "rust/async"},
      {"action": "add_tag", "id": "uuid1", "tag": "async"}
    ],
    "affected_books": 5,
    "warning": null
  }
}
```

### 15.4 Exit Codes (ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚ Ğ´Ğ»Ñ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²)

```
0  â†’ Ğ£ÑĞ¿ĞµÑ…
1  â†’ ĞĞ±Ñ‰Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°
2  â†’ ĞšĞ½Ğ¸Ğ³Ğ° / Ğ¾Ğ±ÑŠĞµĞºÑ‚ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½
3  â†’ ĞĞµĞ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğµ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ / JSON
4  â†’ ĞÑˆĞ¸Ğ±ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
5  â†’ ĞÑˆĞ¸Ğ±ĞºĞ° AI Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ° (rate limit, Ğ½ĞµÑ‚ ĞºĞ»ÑÑ‡Ğ°)
6  â†’ ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ‚Ğ¸
7  â†’ ĞšĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚ Ğ¸ Ñ‚.Ğ¿.)
8  â†’ Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ --confirm)
```

### 15.5 ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ÑĞµÑÑĞ¸Ğ¹ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

#### Claude Code / AI-Ğ°Ğ³ĞµĞ½Ñ‚ Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·ÑƒĞµÑ‚ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ

```bash
# ĞĞ³ĞµĞ½Ñ‚ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸
$ omniscope ai map --compact --json
â†’ {"libraries": {"programming": {"count": 47, "unindexed": 12, ...}}}

# ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ½ĞµĞ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ½Ğ¸Ğ³Ğ¸
$ omniscope search --no-ai-index --json
â†’ [{"id": "uuid1", "title": "..."}, ...]

# Ğ˜Ğ½Ğ´ĞµĞºÑĞ¸Ñ€ÑƒĞµÑ‚ Ğ¸Ñ… Ğ¿Ğ°ĞºĞµÑ‚Ğ½Ğ¾
$ omniscope ai index --all --json
â†’ {"status": "ok", "indexed": 12, "failed": 0}

# Ğ˜Ñ‰ĞµÑ‚ ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ±ĞµĞ· Ñ‚ĞµĞ³Ğ¾Ğ²
$ omniscope search --no-tags --json
â†’ [{"id": "uuid3", ...}, {"id": "uuid5", ...}]

# AI Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ‚ĞµĞ³Ğ¸ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ summary
$ omniscope book get uuid3 --field ai.key_topics --json
â†’ {"data": ["ownership", "memory", "systems"]}

$ omniscope book tag set uuid3 "rust" "memory" "systems" --json
â†’ {"status": "ok", "tags": ["rust", "memory", "systems"]}

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ¾ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞµ
$ omniscope stats --json
â†’ {"total": 47, "read": 30, "unread": 17, ...}
```

#### ĞĞ³ĞµĞ½Ñ‚ Ğ¸Ñ‰ĞµÑ‚ Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞºĞ½Ğ¸Ğ³Ñƒ

```bash
# ĞŸĞ¾Ğ¸ÑĞº Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½
$ omniscope web search "Programming Rust 2nd edition" --json
â†’ {"results": [{"title": "Programming Rust", "isbn": "...", "sources": [...]}]}

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ â€” ĞµÑÑ‚ÑŒ Ğ»Ğ¸ ÑƒĞ¶Ğµ Ğ² Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞµ
$ omniscope search --isbn "9781492052555" --json
â†’ {"status": "ok", "data": []}  # ĞĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² â€” Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒ

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ (Ñ„Ğ°Ğ¹Ğ» Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¹Ğ´Ñ‘Ñ‚ ÑĞ°Ğ¼)
$ omniscope add --no-file \
    --title "Programming Rust" \
    --author "Jim Blandy" \
    --year 2021 \
    --isbn "9781492052555" \
    --tag rust --tag systems \
    --library programming \
    --json
â†’ {"status": "ok", "data": {"id": "new-uuid", ...}}

# Ğ¡Ñ€Ğ°Ğ·Ñƒ Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€ÑƒĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· AI
$ omniscope ai enrich new-uuid --json
â†’ {"status": "ok", "enriched": ["summary", "toc", "metadata"]}
```

#### ĞĞ³ĞµĞ½Ñ‚ Ñ€ĞµĞ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·ÑƒĞµÑ‚ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ

```bash
# Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° dry-run
$ omniscope ai chat \
  "organize all rust books into subfolders: beginner, intermediate, advanced, reference" \
  --dry-run --json
â†’ {
    "plan": [
      {"action": "create_folder", "path": "rust/beginner"},
      {"action": "move_book", "id": "uuid1", "to": "rust/beginner"},
      ...
    ],
    "affected_books": 12
  }

# Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚
$ omniscope ai chat \
  "organize all rust books into subfolders: beginner, intermediate, advanced, reference" \
  --execute --json
â†’ {"status": "ok", "actions_taken": 15, "books_moved": 12}
```

### 15.6 AGENT.md â€” Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

Ğ’ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ»ĞµĞ¶Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» `AGENT.md` â€” ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ², ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ¾Ğ±ÑŠÑÑĞ½ÑĞµÑ‚ Ğ²ÑÑ‘ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾Ğµ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ omniscope:

```markdown
# omniscope â€” AI Agent Guide

## Quick Start Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

Ğ’ÑĞµĞ³Ğ´Ğ° Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°Ğ¹ ÑĞµÑÑĞ¸Ñ Ñ:
1. `omniscope doctor --json` â†’ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ²ÑÑ‘ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
2. `omniscope ai map --compact --json` â†’ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸
3. `omniscope stats --json` â†’ Ğ¿Ğ¾Ğ½ÑÑ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸

## ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ğ¸

- **BookCard** = JSON-Ñ„Ğ°Ğ¹Ğ» Ñ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ ĞºĞ½Ğ¸Ğ³Ğ¸. Ğ¤Ğ°Ğ¹Ğ» ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ĞµĞ½.
- **Library** = Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° Ğ²ĞµÑ€Ñ…Ğ½ĞµĞ³Ğ¾ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ (ĞºĞ°Ğº ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ Ğ² Zotero)
- **Folder** = Ğ¸ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸ (rust/beginner/...)
- **Tag** = Ğ¼ĞµÑ‚ĞºĞ°, ĞºĞ½Ğ¸Ğ³Ğ° Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¸Ğ¼ĞµÑ‚ÑŒ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ñ‚ĞµĞ³Ğ¾Ğ²

## Ğ Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğµ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹

### ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ:
omniscope search "query" --json â†’ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ id â†’ omniscope book get {id} --json â†’ omniscope book update {id} --set field=value --json

### ĞŸĞ°ĞºĞµÑ‚Ğ½Ğ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:
omniscope search --tag old-tag --json | jq '.[].id' | xargs -I{} omniscope book tag add {} "new-tag" --json

### Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:
Ğ’ÑĞµĞ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ --dry-run Ğ¿ĞµÑ€ĞµĞ´ Ğ´ĞµÑÑ‚Ñ€ÑƒĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼Ğ¸ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸.
Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ omniscope book get {id} --json Ğ¿ĞµÑ€ĞµĞ´ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ.

## ĞšĞ¾Ğ´Ñ‹ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº â†’ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ
- exit 2 (NOT_FOUND) â†’ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒ id Ñ‡ĞµÑ€ĞµĞ· omniscope list --json
- exit 5 (AI_ERROR) â†’ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒ omniscope config get ai.provider
- exit 8 (CONFIRM_REQUIRED) â†’ Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒ Ñ„Ğ»Ğ°Ğ³ --confirm
```

---

## 16. ĞŸĞ»Ğ°Ğ½ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ â€” Ğ¤Ğ°Ğ·Ñ‹ Ğ´Ğ»Ñ AI IDE

### Ğ¤Ğ°Ğ·Ğ° 0: Ğ¡ĞºĞ°Ñ„Ñ„Ğ¾Ğ»Ğ´Ğ¸Ğ½Ğ³ (2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
```
â–¡ Cargo workspace ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
â–¡ Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (BookCard, Library, Tag)
â–¡ SQLite ÑÑ…ĞµĞ¼Ğ° Ğ¸ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ (Ñ sqlx)
â–¡ Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ TUI ÑĞºĞµĞ»ĞµÑ‚ (ratatui + crossterm)
â–¡ Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ/Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº
â–¡ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (config.toml)
```

### Ğ¤Ğ°Ğ·Ğ° 1: Ğ¯Ğ´Ñ€Ğ¾ (4 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
```
â–¡ ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ TUI Ñ Ñ‚Ñ€ĞµĞ¼Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑĞ¼Ğ¸
â–¡ Vim-Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ñ‹ Ğ¸ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ
â–¡ CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ Ğ½Ğ°Ğ´ ĞºĞ½Ğ¸Ğ³Ğ°Ğ¼Ğ¸
â–¡ Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ fuzzy Ğ¿Ğ¾Ğ¸ÑĞº (nucleo)
â–¡ Ğ¢ĞµĞ³Ğ¸ Ğ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸
â–¡ ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
â–¡ Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸ĞµĞ¼ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
```

### Ğ¤Ğ°Ğ·Ğ° 2: ĞŸĞ¾Ğ¸ÑĞº (2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
```
â–¡ Telescope-like overlay
â–¡ Full-text Ğ¿Ğ¾Ğ¸ÑĞº Ñ‡ĞµÑ€ĞµĞ· tantivy
â–¡ DSL Ğ¿Ğ°Ñ€ÑĞµÑ€ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
â–¡ Frecency Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼
â–¡ Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ (ÑÑ‚Ğ°Ñ‚ÑƒÑ, Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚, Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³, Ğ³Ğ¾Ğ´)
â–¡ ĞĞ²Ñ‚Ğ¾Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞ³Ğ¾Ğ²/Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ²
```

### Ğ¤Ğ°Ğ·Ğ° 3: AI-Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ (3 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
```
â–¡ AI Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ² TUI
â–¡ Library Map Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ
â–¡ Book indexing pipeline
â–¡ Summary + TOC Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ
â–¡ AI action executor
â–¡ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ¾Ğ²
â–¡ ĞĞ±Ğ¾Ğ³Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‡ĞµÑ€ĞµĞ· AI
```

### Ğ¤Ğ°Ğ·Ğ° 4: Ğ’ĞµĞ±-Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ (2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
```
â–¡ Anna's Archive ÑĞºÑ€ĞµĞ¹Ğ¿ĞµÑ€
â–¡ Open Library API
â–¡ Google Books API
â–¡ ĞĞ²Ñ‚Ğ¾Ñ„ĞµÑ‚Ñ‡ Ğ¾Ğ±Ğ»Ğ¾Ğ¶ĞµĞº
â–¡ ISBN lookup
```

### Ğ¤Ğ°Ğ·Ğ° 5: Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚/Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ (2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
```
â–¡ Zotero Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ (JSON/RDF/BibTeX)
â–¡ Calibre Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ (metadata.db)
â–¡ BibTeX Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°
â–¡ CSV ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚
â–¡ ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ JSON Ğ±ÑĞºĞ°Ğ¿/Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
```

### Ğ¤Ğ°Ğ·Ğ° 6: Ğ¡ĞµÑ€Ğ²ĞµÑ€ (2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
```
â–¡ axum HTTP ÑĞµÑ€Ğ²ĞµÑ€
â–¡ REST API Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
â–¡ WebSocket ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
â–¡ ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ñ‚Ğ¾ĞºĞµĞ½Ñƒ
â–¡ Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
â–¡ MCP Server Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»
```

### Ğ¤Ğ°Ğ·Ğ° 7: ĞŸĞ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° (2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
```
â–¡ ĞĞ±Ğ»Ğ¾Ğ¶ĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· Kitty/Sixel
â–¡ Ğ’ÑĞµ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ²Ñ‹Ğµ Ñ‚ĞµĞ¼Ñ‹
â–¡ ĞŸĞ»Ğ°Ğ³Ğ¸Ğ½Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° (Lua)
â–¡ ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ API
â–¡ Man pages
â–¡ README + wiki
```

---

## 15. Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ API (ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°)

```
docs/
â”œâ”€â”€ README.md
â”œâ”€â”€ QUICKSTART.md
â”œâ”€â”€ user-guide/
â”‚   â”œâ”€â”€ installation.md
â”‚   â”œâ”€â”€ keybindings.md
â”‚   â”œâ”€â”€ search-syntax.md
â”‚   â”œâ”€â”€ ai-librarian.md
â”‚   â””â”€â”€ sync-server.md
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ cli-reference.md      # Ğ’ÑĞµ CLI ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ñ --json
â”‚   â”œâ”€â”€ rest-api.md           # HTTP API Ğ´Ğ»Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ°
â”‚   â”œâ”€â”€ mcp-tools.md          # MCP Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
â”‚   â”œâ”€â”€ json-schema.md        # Ğ¡Ñ…ĞµĞ¼Ğ° BookCard
â”‚   â””â”€â”€ plugin-api.md         # Lua plugin API
â”œâ”€â”€ ai-integration/
â”‚   â”œâ”€â”€ overview.md           # ĞšĞ°Ğº AI Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ omniscope
â”‚   â”œâ”€â”€ library-map.md        # Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Library Map
â”‚   â”œâ”€â”€ action-protocol.md    # ĞŸÑ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ» AI-Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹
â”‚   â””â”€â”€ examples/
â”‚       â”œâ”€â”€ claude-code.md    # ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ñ Claude Code
â”‚       â”œâ”€â”€ gemini-cli.md
â”‚       â””â”€â”€ custom-agent.md
â””â”€â”€ development/
    â”œâ”€â”€ architecture.md
    â”œâ”€â”€ contributing.md
    â””â”€â”€ building.md
```

---

## 16. Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸ Ğ´Ğ»Ñ AI IDE (Cursor-style)

ĞŸÑ€Ğ¸ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° AI-Ğ°Ğ³ĞµĞ½Ñ‚ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¼ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°Ğ¼:

### ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ° Ğ¿Ñ€Ğ¸ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ

```markdown
## ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°: omniscope TUI

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ ĞºĞ¾Ğ´Ğ°:
1. Rust-first: Ğ²ÑÑ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ½Ğ° Rust, C/C++ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ FFI Ğº ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğ¼ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ°Ğ¼
2. Error handling: Ğ²ÑĞµĞ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ thiserror/anyhow, Ğ½Ğµ unwrap() Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½ ĞºĞ¾Ğ´Ğµ
3. Async: tokio Ğ²ĞµĞ·Ğ´Ğµ, Ğ³Ğ´Ğµ Ğ½ÑƒĞ¶ĞµĞ½ I/O. Sync Ñ‚Ğ°Ğ¼, Ğ³Ğ´Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ.
4. TUI: ratatui components Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ stateless Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚Ñ‹ + Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ State
5. JSON: Ğ²ÑĞµ Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ñ‹Ğ²Ğ°Ñ‚ÑŒ Serialize/Deserialize

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹:
- omniscope-core: Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ±ĞµĞ· TUI Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ (Ñ‚ĞµÑÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾!)
- omniscope-tui: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ UI ĞºĞ¾Ğ´
- omniscope-cli: CLI Ğ¾Ğ±Ñ‘Ñ€Ñ‚ĞºĞ°

### Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:
- Ğ®Ğ½Ğ¸Ñ‚-Ñ‚ĞµÑÑ‚Ñ‹ Ğ´Ğ»Ñ Ğ²ÑĞµĞ¹ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ Ğ² core
- Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ñ‹ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¸ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ°
- Snapshot Ñ‚ĞµÑÑ‚Ñ‹ Ğ´Ğ»Ñ TUI (Ñ‡ĞµÑ€ĞµĞ· insta)

### API-first:
- ĞšĞ°Ğ¶Ğ´Ğ°Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ñ‡ĞµÑ€ĞµĞ· CLI Ñ --json
- JSON ÑÑ…ĞµĞ¼Ğ° Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ° Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ñ‚Ğ¸Ğ¿Ğ¾Ğ²
- Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ² BookCard Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
```

---

---

## 17. Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğº Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ â€” Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ **Ğ¶Ñ‘ÑÑ‚ĞºĞ¸Ğ¼ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼**, Ğ° Ğ½Ğµ Ğ¶ĞµĞ»Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¼ Ğ±Ğ¾Ğ½ÑƒÑĞ¾Ğ¼. ĞšĞ°Ğ¶Ğ´Ğ°Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ¼ĞµĞµÑ‚ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ²ĞµÑ€Ñ…Ğ½Ğ¸Ğ¹ Ğ¿Ñ€ĞµĞ´ĞµĞ» Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼Ğ¸ Ğ±ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€ĞºĞ°Ğ¼Ğ¸ Ğ² CI.

### 17.1 Ğ‘ÑĞ´Ğ¶ĞµÑ‚ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ (SLA Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°)

| ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ | ĞŸÑ€ĞµĞ´ĞµĞ» | ĞœĞµÑ‚Ğ¾Ğ´ Ğ¸Ğ·Ğ¼ĞµÑ€ĞµĞ½Ğ¸Ñ |
|---|---|---|
| **Ğ¥Ğ¾Ğ»Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ TUI** | < 100ms | ĞÑ‚ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ´Ğ¾ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ñ€ĞµĞ½Ğ´ĞµÑ€ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ°Ğ´Ñ€Ğ° |
| **Ğ“Ğ¾Ñ€ÑÑ‡Ğ¸Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ (Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹)** | < 30ms | ĞŸĞ¾ÑĞ»Ğµ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° (ĞºÑÑˆ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑ‚) |
| **Fuzzy Ğ¿Ğ¾Ğ¸ÑĞº (< 1000 ĞºĞ½Ğ¸Ğ³)** | < 10ms | Latency Ğ´Ğ¾ Ğ¿ĞµÑ€Ğ²Ñ‹Ñ… Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² |
| **Fuzzy Ğ¿Ğ¾Ğ¸ÑĞº (< 10 000 ĞºĞ½Ğ¸Ğ³)** | < 30ms | Ğ˜Ğ½ĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹, Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» |
| **Full-text Ğ¿Ğ¾Ğ¸ÑĞº** | < 50ms | tantivy query, Ğ»ÑĞ±Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸ |
| **ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ ĞºĞ½Ğ¸Ğ³Ğ¸** | < 5ms | Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· SQLite + Ğ´ĞµÑĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ |
| **Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸** | < 20ms | Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ JSON + Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ SQLite |
| **Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¸Ğ³Ğ¸** | < 200ms | Ğ’ĞºĞ»ÑÑ‡Ğ°Ñ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‡ĞµÑ€ĞµĞ· FFI |
| **Ğ˜Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ tantivy** | < 100ms/ĞºĞ½Ğ¸Ğ³Ğ° | Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ |
| **CLI ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° (Ğ»ÑĞ±Ğ°Ñ)** | < 150ms | ĞÑ‚ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ° Ğ´Ğ¾ stdout |
| **CLI --json Ğ²Ñ‹Ğ²Ğ¾Ğ´** | < 200ms | Ğ’ĞºĞ»ÑÑ‡Ğ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
| **Library Map Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ** | < 500ms | Ğ”Ğ»Ñ 10 000 ĞºĞ½Ğ¸Ğ³ |
| **Library Map Ğ¸Ğ· ĞºÑÑˆĞ°** | < 5ms | ĞŸĞ¾ÑĞ»Ğµ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ |
| **Ğ ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³ TUI ĞºĞ°Ğ´Ñ€Ğ°** | < 16ms | 60 FPS ÑĞºĞ²Ğ¸Ğ²Ğ°Ğ»ĞµĞ½Ñ‚ |
| **ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ j/k** | < 5ms | Ğ”Ğ¾ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ¾Ñ‚Ñ€ĞµĞ½Ğ´ĞµÑ€ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ°Ğ´Ñ€Ğ° |
| **Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²ĞµÑ€Ğ°** | < 500ms | Ğ”Ğ¾ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ |

### 17.2 ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ² ĞºĞ¾Ğ´Ğµ

#### Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¸ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
```rust
// ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ: Ğ›ĞµĞ½Ğ¸Ğ²Ğ°Ñ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… Ñ‚ÑĞ¶Ñ‘Ğ»Ñ‹Ñ… ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²
pub struct AppState {
    // SQLite Ğ¸ tantivy â€” Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ¾Ğ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğ¸
    db: OnceCell<Arc<SqlitePool>>,
    search_index: OnceCell<Arc<TantivyIndex>>,
    
    // Library Map ĞºÑÑˆĞ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ¸ Ğ½Ğ° Ğ´Ğ¸ÑĞºĞµ
    library_map_cache: RwLock<Option<CachedLibraryMap>>,
    
    // Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ½Ğ¸Ğ³ â€” lazy: Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ
    visible_books: VecDeque<BookSummary>,  // Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ summary, Ğ½Ğµ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸
}

// Ğ—ĞĞŸĞ Ğ•Ğ©Ğ•ĞĞ: Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°Ñ‚ÑŒ Ğ²ÑĞµ JSON-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‚Ğµ
// ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ: Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‚Ğ¾, Ñ‡Ñ‚Ğ¾ Ğ²Ğ¸Ğ´Ğ½Ğ¾ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğµ + Â±50 ĞºĞ½Ğ¸Ğ³ Ğ±ÑƒÑ„ĞµÑ€
```

#### Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ²
```rust
// ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿: Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ N ĞºĞ½Ğ¸Ğ³, Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ â€” Ğ¿Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ
pub struct VirtualizedBookList {
    total_count: usize,
    viewport_start: usize,
    viewport_size: usize,           // Ğ’Ñ‹ÑĞ¾Ñ‚Ğ° ÑĞºÑ€Ğ°Ğ½Ğ° Ğ² ÑÑ‚Ñ€Ğ¾ĞºĞ°Ñ…
    buffer_size: usize,             // = viewport_size * 3
    loaded_range: Range<usize>,
    items: HashMap<usize, BookSummary>,
    
    // ĞŸÑ€ĞµĞ´Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°: Ğ¿Ñ€Ğ¸ Ğ¿Ñ€Ğ¾ĞºÑ€ÑƒÑ‚ĞºĞµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ²Ğ¿ĞµÑ€Ñ‘Ğ´
    prefetch_trigger: usize,        // = buffer_size / 2
}

// BookSummary â€” Ğ½Ğµ Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ°! Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ² ÑĞ¿Ğ¸ÑĞºĞµ
pub struct BookSummary {
    pub id: Uuid,
    pub title: String,
    pub authors: SmallVec<[String; 2]>,  // ĞĞ±Ñ‹Ñ‡Ğ½Ğ¾ 1-2 Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ°
    pub year: Option<i16>,
    pub format: FileFormat,
    pub rating: u8,
    pub read_status: ReadStatus,
    pub tags: SmallVec<[TagId; 5]>,     // ID Ñ‚ĞµĞ³Ğ¾Ğ², Ğ½Ğµ ÑÑ‚Ñ€Ğ¾ĞºĞ¸
    pub has_file: bool,
    pub frecency_score: f32,
}
// ĞŸĞ¾Ğ»Ğ½Ğ°Ñ BookCard Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¸ preview Ğ¸Ğ»Ğ¸ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸
```

#### ĞŸĞ¾Ğ¸ÑĞº Ğ±ĞµĞ· Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ¸ UI
```rust
// ĞŸĞ¾Ğ¸ÑĞº Ğ’Ğ¡Ğ•Ğ“Ğ”Ğ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹, Ğ½Ğ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³
pub struct SearchActor {
    tx: mpsc::Sender<SearchRequest>,
    rx: mpsc::Receiver<SearchResult>,
    debounce: Duration,   // 50ms debounce Ğ´Ğ»Ñ keyboard input
}

// ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ¾Ñ‚Ğ¾Ğº Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
tokio::spawn(async move {
    let mut pending: Option<SearchRequest> = None;
    loop {
        select! {
            req = rx.recv() => { pending = Some(req); }
            _ = sleep(DEBOUNCE), if pending.is_some() => {
                let result = execute_search(pending.take().unwrap()).await;
                result_tx.send(result).ok();
            }
        }
    }
});
```

#### Memory-mapped Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ´Ğ»Ñ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°
```rust
// tantivy Ğ¸Ğ½Ğ´ĞµĞºÑ Ñ‡ĞµÑ€ĞµĞ· mmap Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
let mmap_dir = MmapDirectory::open(&index_path)?;
let index = Index::open_or_create(mmap_dir, schema)?;
// Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ 100k ĞºĞ½Ğ¸Ğ³ Ğ·Ğ° < 30ms
```

#### ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… ÑƒÑ€Ğ¾Ğ²Ğ½ÑÑ…
```rust
pub struct CacheStack {
    // L1: In-memory LRU (Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 500 ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº)
    memory_cache: LruCache<Uuid, Arc<BookCard>>,
    
    // L2: SQLite (Ğ´ĞµĞ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²)
    sqlite: Arc<SqlitePool>,
    
    // L3: JSON Ñ„Ğ°Ğ¹Ğ»Ñ‹ (source of truth)
    cards_dir: PathBuf,
}

// Library Map: ĞºÑÑˆ Ñ Ğ¸Ğ½Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¿Ğ¾ inotify
pub struct LibraryMapCache {
    map: RwLock<Arc<LibraryMap>>,
    last_updated: AtomicU64,
    dirty: AtomicBool,      // Ğ¤Ğ»Ğ°Ğ³: Ğ½ÑƒĞ¶Ğ½Ğ° Ñ€ĞµĞ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ
}

// ĞŸÑ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ Ğ»ÑĞ±Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ â†’ dirty=true
// Ğ ĞµĞ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ: Ñ„Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ñ‚Ğ¾Ğº, Ğ½Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ UI
```

#### ĞšĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ñ Ğ¸ Ğ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€
```toml
# Cargo.toml â€” Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ñ€ĞµĞ»Ğ¸Ğ·Ğ°
[profile.release]
opt-level = 3
lto = "fat"              # Link-time optimization
codegen-units = 1        # ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
strip = "symbols"        # Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸
panic = "abort"          # ĞœĞµĞ½ÑŒÑˆĞµ overhead
# Ğ¦ĞµĞ»ÑŒ: Ğ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ğ¸Ğº < 15MB, Ñ…Ğ¾Ğ»Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ < 100ms

[profile.dev]
opt-level = 1            # Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ ĞºĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ñ Ğ² dev, Ğ½Ğ¾ Ğ½Ğµ Ñ‡ĞµÑ€ĞµĞ¿Ğ°Ñ…Ğ°
```

### 17.3 ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ±ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€ĞºĞ¸ Ğ² CI

```rust
// benches/performance.rs â€” Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ÑÑ‚ÑÑ Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ PR
#[bench]
fn bench_cold_start(b: &mut Bencher) {
    b.iter(|| {
        let app = App::new_with_library(test_library_path());
        app.render_first_frame()
    });
    // FAIL ĞµÑĞ»Ğ¸ > 100ms
}

#[bench]
fn bench_search_1000(b: &mut Bencher) {
    let searcher = setup_searcher_1000_books();
    b.iter(|| searcher.search("rust async"));
    // FAIL ĞµÑĞ»Ğ¸ > 10ms
}

#[bench]
fn bench_search_10000(b: &mut Bencher) {
    let searcher = setup_searcher_10000_books();
    b.iter(|| searcher.search("programming systems"));
    // FAIL ĞµÑĞ»Ğ¸ > 30ms
}

#[bench]
fn bench_cli_search(b: &mut Bencher) {
    b.iter(|| {
        Command::new("omniscope")
            .args(["search", "rust", "--json"])
            .output()
    });
    // FAIL ĞµÑĞ»Ğ¸ > 150ms
}
```

### 17.4 ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

```toml
# Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ‚Ñ€Ğ°ÑÑĞ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
[debug]
perf_tracing = false       # Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· env: omniscope_PERF=1
slow_query_threshold = "20ms"  # Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
startup_timing = false     # omniscope_TIMING=1 â€” Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ñ‚Ğ°Ğ¹Ğ¼Ğ¸Ğ½Ğ³Ğ° Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‚Ğµ
```

```bash
# Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ° Ğ² Ñ€Ğ°Ğ½Ñ‚Ğ°Ğ¹Ğ¼Ğµ
omniscope_PERF=1 omniscope search "rust"
# â†’ [PERF] query_parse: 0.1ms
# â†’ [PERF] sqlite_fts: 3.2ms
# â†’ [PERF] nucleo_fuzzy: 1.8ms
# â†’ [PERF] rank_merge: 0.4ms
# â†’ [PERF] total: 5.5ms  âœ“ (limit: 10ms)

omniscope_TIMING=1 omniscope
# â†’ [TIMING] config_load: 2ms
# â†’ [TIMING] sqlite_connect: 8ms
# â†’ [TIMING] index_open: 15ms
# â†’ [TIMING] first_frame: 45ms  âœ“ (limit: 100ms)
```

---

## 18. AI-Ğ°Ğ³ĞµĞ½Ñ‚ CLI â€” Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»

> **ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿:** AI-Ğ°Ğ³ĞµĞ½Ñ‚, Ğ¸Ğ¼ĞµÑÑ‰Ğ¸Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»Ñƒ, Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑƒĞ¼ĞµÑ‚ÑŒ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑ‚ÑŒ **Ğ°Ğ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ğ¾ Ğ²ÑĞµ** Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¾Ğ¹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºÑƒ Ñ‡ĞµÑ€ĞµĞ· TUI. CLI â€” ÑÑ‚Ğ¾ Ğ½Ğµ Ğ¾Ğ±Ñ‘Ñ€Ñ‚ĞºĞ° Ğ½Ğ°Ğ´ TUI, ÑÑ‚Ğ¾ **Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ**.

### 18.1 Ğ”Ğ¸Ğ·Ğ°Ğ¹Ğ½ CLI Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

Ğ’ÑĞµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ ÑĞ»ĞµĞ´ÑƒÑÑ‚ Ñ‚Ñ€Ñ‘Ğ¼ Ğ¶Ñ‘ÑÑ‚ĞºĞ¸Ğ¼ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°Ğ¼:

```
1. Ğ”Ğ•Ğ¢Ğ•Ğ ĞœĞ˜ĞĞ˜Ğ ĞĞ’ĞĞĞĞ«Ğ™ Ğ’Ğ«Ğ’ĞĞ”: --json Ğ²ÑĞµĞ³Ğ´Ğ° Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·ÑƒĞµĞ¼ÑƒÑ ÑÑ…ĞµĞ¼Ñƒ
2. ĞœĞĞ¨Ğ˜ĞĞĞ§Ğ˜Ğ¢ĞĞ•ĞœĞ«Ğ• ĞĞ¨Ğ˜Ğ‘ĞšĞ˜: Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ² stderr ĞºĞ°Ğº JSON { "error": "...", "code": N }
3. EXIT CODES: 0 = ÑƒÑĞ¿ĞµÑ…, 1 = Ğ¾ÑˆĞ¸Ğ±ĞºĞ°, 2 = Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾, 3 = ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚
```

### 18.2 ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ CLI

#### Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¸Ğ³Ğ°Ğ¼Ğ¸

```bash
# â”€â”€ ĞŸĞ ĞĞ¡ĞœĞĞ¢Ğ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ¿Ğ¾ ID
omniscope book get <id>
omniscope book get <id> --json
omniscope book get <id> --field metadata.title     # Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ´Ğ½Ğ¾ Ğ¿Ğ¾Ğ»Ğµ

# Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ½Ğ¸Ğ³ (Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸ĞµĞ¹)
omniscope book list
omniscope book list --json
omniscope book list --limit 20 --offset 0
omniscope book list --library programming
omniscope book list --tag rust
omniscope book list --status unread
omniscope book list --format pdf
omniscope book list --sort "year:desc"

# Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
omniscope book stats                               # ĞĞ±Ñ‰Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
omniscope book stats --json

# â”€â”€ Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ• Ğ˜ Ğ”ĞĞ‘ĞĞ’Ğ›Ğ•ĞĞ˜Ğ• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ Ğ¸Ğ· Ñ„Ğ°Ğ¹Ğ»Ğ°
omniscope book add --file /path/to/book.pdf
omniscope book add --file /path/to/book.pdf --json

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ Ğ±ĞµĞ· Ñ„Ğ°Ğ¹Ğ»Ğ° (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)
omniscope book add \
  --title "The Rust Programming Language" \
  --author "Steve Klabnik" \
  --author "Carol Nichols" \
  --year 2023 \
  --tag rust --tag systems \
  --library programming \
  --isbn 9781718503106
omniscope book add --json-stdin < card.json        # Ğ˜Ğ· stdin

# Batch Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
omniscope book add --dir /books/rust/ --recursive  # Ğ’ÑĞµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ² Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸
omniscope book add --dir /books/ --recursive --json

# â”€â”€ Ğ Ğ•Ğ”ĞĞšĞ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ
omniscope book update <id> --set "metadata.title=New Title"
omniscope book update <id> --set "organization.rating=5"
omniscope book update <id> --set "organization.read_status=read"
omniscope book update <id> --json-stdin < updated_fields.json

# ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ·Ğ°Ğ¼ĞµĞ½Ğ° ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸
omniscope book replace <id> < full_card.json

# Patch (merge, Ğ½Ğµ replace)
omniscope book patch <id> < partial_card.json

# Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ·Ğ° Ñ€Ğ°Ğ·
omniscope book update <id> \
  --set "metadata.year=2023" \
  --set "organization.rating=5" \
  --set "ai.summary=ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ ĞºĞ½Ğ¸Ğ³Ğ° Ğ¿Ğ¾ Rust..." \
  --json

# â”€â”€ Ğ¢Ğ•Ğ“Ğ˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope book tag add <id> <tag-name>
omniscope book tag remove <id> <tag-name>
omniscope book tag set <id> rust systems beginner  # Ğ—Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ñ‚ĞµĞ³Ğ¸
omniscope book tag list <id>

# â”€â”€ ĞĞ Ğ“ĞĞĞ˜Ğ—ĞĞ¦Ğ˜Ğ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope book move <id> --library fiction
omniscope book move <id> --folder "russian/classics"
omniscope book status <id> --set reading           # unread | reading | read | dnf
omniscope book rate <id> 5                         # Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ 1-5

# â”€â”€ Ğ£Ğ”ĞĞ›Ğ•ĞĞ˜Ğ• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope book delete <id>                         # Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ (Ñ„Ğ°Ğ¹Ğ» Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ)
omniscope book delete <id> --with-file             # Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ Ğ˜ Ñ„Ğ°Ğ¹Ğ»
omniscope book delete <id> --force                 # Ğ‘ĞµĞ· Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ
omniscope book delete <id> --dry-run               # ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ±ÑƒĞ´ĞµÑ‚ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¾

# â”€â”€ Ğ¤ĞĞ™Ğ›Ğ« â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope book file get <id>                       # ĞŸÑƒÑ‚ÑŒ Ğº Ñ„Ğ°Ğ¹Ğ»Ñƒ
omniscope book file attach <id> /path/to/file.pdf  # ĞŸÑ€Ğ¸Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» Ğº ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞµ
omniscope book file detach <id>                    # ĞÑ‚Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» (ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ)
omniscope book file open <id>                      # ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ğ¾Ğ¼ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸
omniscope book file open <id> --app zathura        # Ğ£ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½ÑƒÑ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñƒ
omniscope book file copy <id> /destination/        # Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»

# â”€â”€ Ğ—ĞĞœĞ•Ğ¢ĞšĞ˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope book note add <id> "ĞÑ‡ĞµĞ½ÑŒ Ğ¿Ğ¾Ğ»ĞµĞ·Ğ½Ğ°Ñ Ğ³Ğ»Ğ°Ğ²Ğ° Ğ¿Ñ€Ğ¾ ownership"
omniscope book note list <id>
omniscope book note delete <id> <note-id>
```

#### ĞŸĞ¾Ğ¸ÑĞº

```bash
# â”€â”€ ĞŸĞĞ˜Ğ¡Ğš â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
omniscope search "rust async"
omniscope search "rust async" --json

# Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸ (Ñ‚Ğ¾Ñ‚ Ğ¶Ğµ DSL Ñ‡Ñ‚Ğ¾ Ğ² TUI)
omniscope search "rust" \
  --author "klabnik" \
  --tag "systems" \
  --year-min 2020 \
  --year-max 2023 \
  --format pdf \
  --status unread \
  --rating-min 4 \
  --library programming

# ĞŸĞ¾Ğ¸ÑĞº Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¼ Ğ¿Ğ¾Ğ»ÑĞ¼
omniscope search --title "rust programming"
omniscope search --author "klabnik"
omniscope search --tag "systems"
omniscope search --isbn "9781718503106"

# Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
omniscope search "rust" --mode fuzzy           # ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ
omniscope search "rust ownership" --mode fts   # Full-text (tantivy)
omniscope search "ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ" --mode semantic  # Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹

# Ğ’Ñ‹Ğ²Ğ¾Ğ´ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
omniscope search "rust" --json                 # ĞŸĞ¾Ğ»Ğ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸
omniscope search "rust" --json --fields "id,metadata.title,organization.tags"
omniscope search "rust" --json --limit 5
omniscope search "rust" --count                # Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾

# ĞŸĞ¾Ğ¸ÑĞº Ñ DSL ÑÑ‚Ñ€Ğ¾ĞºĞ¾Ğ¹ (ĞºĞ°Ğº Ğ² TUI telescope)
omniscope search --dsl "@author:klabnik #rust y:2020-2023 r:>=4"
omniscope search --dsl "has:file NOT #python" --json

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Library Map Ğ´Ğ»Ñ AI-ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°
omniscope library map                          # ĞšĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ´Ğ»Ñ AI
omniscope library map --json
omniscope library map --refresh               # ĞŸÑ€Ğ¸Ğ½ÑƒĞ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ€ĞµĞ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ
```

#### Ğ¢ĞµĞ³Ğ¸ Ğ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸

```bash
# â”€â”€ Ğ¢Ğ•Ğ“Ğ˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope tag list
omniscope tag list --json
omniscope tag create "machine-learning" --color "#ff6b6b"
omniscope tag delete "old-tag" --force
omniscope tag rename "ml" "machine-learning"
omniscope tag merge "ml" "machine-learning"    # ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ³Ğ¸
omniscope tag stats                            # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ Ñ‚ĞµĞ³Ğ°Ğ¼
omniscope tag stats --json

# â”€â”€ Ğ‘Ğ˜Ğ‘Ğ›Ğ˜ĞĞ¢Ğ•ĞšĞ˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope library list
omniscope library list --json
omniscope library create "mathematics" --description "Books on math"
omniscope library delete "old-lib" --force
omniscope library rename "prog" "programming"
omniscope library stats
omniscope library stats --json

# â”€â”€ ĞŸĞĞŸĞšĞ˜ (Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞº) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope folder list --library programming
omniscope folder create --library programming --path "rust/advanced"
omniscope folder delete --library programming --path "rust/old"
```

#### AI Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ‡ĞµÑ€ĞµĞ· CLI

```bash
# â”€â”€ AI Ğ˜ĞĞ”Ğ•ĞšĞ¡ĞĞ¦Ğ˜Ğ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Ğ˜Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ´Ğ½Ñƒ ĞºĞ½Ğ¸Ğ³Ñƒ (Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ summary + TOC + ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ‚ĞµĞ¼Ñ‹)
omniscope ai index <id>
omniscope ai index <id> --json                 # Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½ÑƒÑ ai ÑĞµĞºÑ†Ğ¸Ñ

# Ğ˜Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾
omniscope ai index <id1> <id2> <id3>
omniscope ai index --all                       # Ğ’ÑĞµ Ğ½ĞµĞ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ
omniscope ai index --all --force               # ĞŸĞµÑ€ĞµĞ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑĞµ

# â”€â”€ AI ĞœĞ•Ğ¢ĞĞ”ĞĞĞĞ«Ğ• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ĞĞ±Ğ¾Ğ³Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ½Ğ¸Ğ³Ğ¸ Ñ‡ĞµÑ€ĞµĞ· AI (Ğ¸Ğ· Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ¸Ğ»Ğ¸ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğ°)
omniscope ai enrich <id>                       # ĞĞ²Ñ‚Ğ¾: Ñ„Ğ°Ğ¹Ğ» + Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½ Ğ¿Ğ¾Ğ¸ÑĞº
omniscope ai enrich <id> --from-file          # Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ· ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ°
omniscope ai enrich <id> --from-web           # Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ· Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğ°
omniscope ai enrich <id> --json               # Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ÑÑŒ

# Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ summary
omniscope ai summary <id>                      # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ/Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ summary
omniscope ai summary <id> --length short       # short | medium | long
omniscope ai summary <id> --json

# Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ TOC (Ğ¾Ğ³Ğ»Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ)
omniscope ai toc <id>
omniscope ai toc <id> --json

# ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ³Ğ¸ Ğ´Ğ»Ñ ĞºĞ½Ğ¸Ğ³Ğ¸
omniscope ai suggest-tags <id>
omniscope ai suggest-tags <id> --apply         # ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğµ
omniscope ai suggest-tags <id> --json

# â”€â”€ AI Ğ—ĞĞŸĞ ĞĞ¡Ğ« (Ñ‡Ğ°Ñ‚-like) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Ğ—Ğ°Ğ´Ğ°Ñ‚ÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ AI-Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ°Ñ€Ñ
omniscope ai ask "ĞšĞ°ĞºĞ¸Ğµ ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ¿Ğ¾ async Rust Ñ ĞµÑ‰Ñ‘ Ğ½Ğµ Ñ‡Ğ¸Ñ‚Ğ°Ğ»?"
omniscope ai ask "ĞŸĞ¾Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞ¹ Ñ‡Ñ‚Ğ¾ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»Ğµ TRPL" --json

# AI Ñ ÑĞ²Ğ½Ñ‹Ğ¼ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼
omniscope ai ask "Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸ ÑÑ‚Ğ¸ Ğ´Ğ²Ğµ ĞºĞ½Ğ¸Ğ³Ğ¸" --book <id1> --book <id2>
omniscope ai ask "ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·ÑƒĞ¹ Ğ¼Ğ¾Ñ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ Ğ¿Ğ¾ Ñ‚ĞµĞ¼Ğ°Ğ¼" --apply  # Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ

# Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ AI action Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ (Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²)
# stdin Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ JSON action protocol
echo '{"type":"search","query":"rust async"}' | omniscope ai exec
echo '{"type":"update_card","book_id":"<id>","fields":{"organization.rating":5}}' | omniscope ai exec

# â”€â”€ AI ĞŸĞĞšĞ•Ğ¢ĞĞ«Ğ• ĞĞŸĞ•Ğ ĞĞ¦Ğ˜Ğ˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Ğ”ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ (Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ñ‹)
omniscope ai deduplicate --dry-run
omniscope ai deduplicate --json                # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ² ĞºĞ°Ğº JSON

# ĞĞ²Ñ‚Ğ¾Ñ‚ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²ÑĞµĞ¹ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸
omniscope ai autotag --all --dry-run
omniscope ai autotag --all --apply --json

# ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ°ÑƒĞ´Ğ¸Ñ‚ (Ñ‡Ñ‚Ğ¾ Ğ½ĞµÑ‚ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾, Ğ±ĞµĞ· Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, etc.)
omniscope ai audit
omniscope ai audit --json
```

#### Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ / Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚

```bash
# â”€â”€ Ğ˜ĞœĞŸĞĞ Ğ¢ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope import zotero /path/to/library.json
omniscope import zotero /path/to/library.rdf --include-files
omniscope import calibre /path/to/calibre/library/
omniscope import bibtex /path/to/references.bib
omniscope import csv /path/to/books.csv --mapping title:Title,author:Author
omniscope import json /path/to/backup.json    # ĞĞ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚

# Dry-run Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ°
omniscope import zotero /path/to/library.json --dry-run
omniscope import zotero /path/to/library.json --json   # ĞÑ‚Ñ‡Ñ‘Ñ‚ Ğ¾Ğ± Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğµ

# â”€â”€ Ğ­ĞšĞ¡ĞŸĞĞ Ğ¢ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope export json /path/to/backup.json    # ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ±ÑĞºĞ°Ğ¿
omniscope export bibtex /path/to/refs.bib
omniscope export csv /path/to/books.csv
omniscope export markdown /path/to/library.md

# Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ´Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ°
omniscope export json /backup.json --library programming
omniscope export json /backup.json --tag rust --tag systems
omniscope export json - --json                # stdout
```

#### ĞĞ½Ğ»Ğ°Ğ¹Ğ½ Ğ¿Ğ¾Ğ¸ÑĞº

```bash
# â”€â”€ ĞŸĞĞ˜Ğ¡Ğš ĞĞĞ›ĞĞ™Ğ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ĞĞ°Ğ¹Ñ‚Ğ¸ ĞºĞ½Ğ¸Ğ³Ñƒ Ğ² Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğµ Ğ¿Ğ¾ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ/ISBN
omniscope online search "The Rust Programming Language"
omniscope online search --isbn 9781718503106
omniscope online search "klabnik rust" --json

# Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸
omniscope online search "rust" --source annas-archive
omniscope online search "rust" --source openlibrary
omniscope online search "rust" --source googlebooks
omniscope online search "rust" --source all        # Ğ’ÑĞµ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾ ISBN
omniscope online metadata --isbn 9781718503106
omniscope online metadata --isbn 9781718503106 --json

# Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¾Ğ±Ğ»Ğ¾Ğ¶ĞºÑƒ
omniscope online cover <book-id>               # ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ğ»Ğ¾Ğ¶ĞºÑƒ
omniscope online cover --isbn 9781718503106 --save /path/to/cover.jpg
```

#### Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ğ¸ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

```bash
# â”€â”€ Ğ¡Ğ•Ğ Ğ’Ğ•Ğ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope server start                         # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ÑĞµÑ€Ğ²ĞµÑ€
omniscope server start --port 8080 --host 0.0.0.0
omniscope server start --daemon                # Ğ’ Ñ„Ğ¾Ğ½Ğµ
omniscope server stop
omniscope server status
omniscope server status --json

# â”€â”€ Ğ¡Ğ˜ĞĞ¥Ğ ĞĞĞ˜Ğ—ĞĞ¦Ğ˜Ğ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope sync --remote http://tablet:8080 --token $TOKEN
omniscope sync push <book-id> --remote http://tablet:8080
omniscope sync pull <book-id> --remote http://tablet:8080
omniscope sync status --json
```

#### Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ğ¸ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹

```bash
# â”€â”€ ĞšĞĞĞ¤Ğ˜Ğ“ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope config get ui.theme
omniscope config set ui.theme catppuccin-mocha
omniscope config list --json

# â”€â”€ Ğ”Ğ˜ĞĞ“ĞĞĞ¡Ğ¢Ğ˜ĞšĞ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope doctor                               # ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ†ĞµĞ»Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
omniscope doctor --fix                         # Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹
omniscope doctor --json

omniscope index rebuild                        # ĞŸĞµÑ€ĞµÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ tantivy Ğ¸Ğ½Ğ´ĞµĞºÑ
omniscope index rebuild --json
omniscope index stats --json                   # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¸Ğ½Ğ´ĞµĞºÑĞ°

# â”€â”€ ĞŸĞ ĞĞ˜Ğ—Ğ’ĞĞ”Ğ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞĞ¡Ğ¢Ğ¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

omniscope bench                                # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğµ Ğ±ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€ĞºĞ¸
omniscope bench --json
omniscope_PERF=1 omniscope search "rust"         # Ğ¢Ñ€Ğ°ÑÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
```

### 18.3 Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ñ‹ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ° JSON Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

#### Ğ£ÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚

```json
{
  "status": "ok",
  "data": { "...": "..." },
  "meta": {
    "duration_ms": 12,
    "timestamp": "2025-01-15T10:30:00Z",
    "version": "0.3.1"
  }
}
```

#### ĞÑˆĞ¸Ğ±ĞºĞ° (Ğ²ÑĞµĞ³Ğ´Ğ° Ğ² stderr)

```json
{
  "status": "error",
  "error": {
    "code": "BOOK_NOT_FOUND",
    "message": "Book with id '550e8400-...' not found",
    "context": { "id": "550e8400-..." }
  },
  "meta": { "duration_ms": 3 }
}
```

#### Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸ĞµĞ¹

```json
{
  "status": "ok",
  "data": {
    "items": [ "...BookSummary..." ],
    "total": 147,
    "limit": 20,
    "offset": 0,
    "has_more": true
  }
}
```

#### ĞšĞ¾Ğ´Ñ‹ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº (Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·ÑƒĞµĞ¼Ñ‹Ğµ Ğ´Ğ»Ñ AI)

| ĞšĞ¾Ğ´ | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | Exit code |
|---|---|---|
| `BOOK_NOT_FOUND` | ĞšĞ½Ğ¸Ğ³Ğ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ° | 2 |
| `TAG_NOT_FOUND` | Ğ¢ĞµĞ³ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ | 2 |
| `LIBRARY_NOT_FOUND` | Ğ‘Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ° | 2 |
| `VALIDATION_ERROR` | ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğµ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ | 1 |
| `FILE_NOT_FOUND` | Ğ¤Ğ°Ğ¹Ğ» ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ | 2 |
| `DUPLICATE_BOOK` | Ğ”ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚ Ğ¿Ñ€Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ | 3 |
| `AI_UNAVAILABLE` | AI Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ | 1 |
| `PERMISSION_DENIED` | ĞĞµÑ‚ Ğ¿Ñ€Ğ°Ğ² Ğ½Ğ° Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ | 1 |
| `INDEX_ERROR` | ĞÑˆĞ¸Ğ±ĞºĞ° tantivy Ğ¸Ğ½Ğ´ĞµĞºÑĞ° | 1 |

### 18.4 ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ÑĞµÑÑĞ¸Ğ¹ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ°

#### Ğ¡ĞµÑÑĞ¸Ñ 1: ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ĞºĞ½Ğ¸Ğ³Ğ¸ (Claude Code / Gemini CLI)

```bash
# AI-Ğ°Ğ³ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ» Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ: "Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ Ğ¿Ğ¾ async Rust Ğ¸ Ğ¿Ñ€Ğ¾Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€ÑƒĞ¹ ĞµÑ‘"

# 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ, Ğ½ĞµÑ‚ Ğ»Ğ¸ ÑƒĞ¶Ğµ Ñ‚Ğ°ĞºĞ¾Ğ¹ ĞºĞ½Ğ¸Ğ³Ğ¸
$ omniscope search --dsl "@author:tokio-team #async" --json
{"status":"ok","data":{"items":[],"total":0,...}}
# â†’ ĞĞµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾, Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµĞ¼

# 2. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ
$ omniscope book add \
    --title "Async Rust: Concurrent and Parallel Programming" \
    --author "Maxwell Flitton" \
    --year 2024 \
    --tag async --tag rust --tag tokio \
    --library programming \
    --json
{"status":"ok","data":{"id":"a1b2c3d4-...","metadata":{"title":"Async Rust..."},...}}
# â†’ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¸ ID

# 3. ĞŸÑ€Ğ¸ĞºÑ€ĞµĞ¿Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»
$ omniscope book file attach a1b2c3d4 /downloads/async_rust.pdf --json
{"status":"ok","data":{"file":{"path":"...","format":"pdf","size_bytes":5242880}}}

# 4. AI-Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ (summary + TOC)
$ omniscope ai index a1b2c3d4 --json
{"status":"ok","data":{"summary":"ĞšĞ½Ğ¸Ğ³Ğ° Ğ¾Ñ…Ğ²Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚...","table_of_contents":[...],...}}

# 5. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¸Ñ‚Ğ¾Ğ³Ğ¾Ğ²ÑƒÑ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ
$ omniscope book get a1b2c3d4 --json
{"status":"ok","data":{"id":"a1b2c3d4","metadata":{...},"ai":{...},...}}
```

#### Ğ¡ĞµÑÑĞ¸Ñ 2: Ğ ĞµĞ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸

```bash
# AI-Ğ°Ğ³ĞµĞ½Ñ‚: "ĞĞ°Ğ¹Ğ´Ğ¸ Ğ²ÑĞµ ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ±ĞµĞ· Ñ‚ĞµĞ³Ğ¾Ğ² Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸ Ñ‚ĞµĞ³Ğ¸ Ğ´Ğ»Ñ Ğ½Ğ¸Ñ…"

# 1. ĞĞ°Ğ¹Ñ‚Ğ¸ ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ±ĞµĞ· Ñ‚ĞµĞ³Ğ¾Ğ²
$ omniscope search --dsl "NOT has:tags" --json --fields "id,metadata.title"
{"status":"ok","data":{"items":[{"id":"...","title":"..."},...],"total":12}}

# 2. Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ â€” Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ³Ğ¸
$ omniscope ai suggest-tags uuid-1 --json
{"status":"ok","data":{"suggestions":["algorithms","data-structures","python"]}}

# 3. ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ³Ğ¸
$ omniscope book tag set uuid-1 algorithms data-structures python --json
{"status":"ok","data":{"tags":["algorithms","data-structures","python"]}}

# 4. ĞŸĞ°ĞºĞµÑ‚Ğ½Ñ‹Ğ¹ Ğ°ÑƒĞ´Ğ¸Ñ‚ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
$ omniscope ai audit --json
{"status":"ok","data":{"untagged":0,"no_summary":8,"no_file":3,...}}
```

#### Ğ¡ĞµÑÑĞ¸Ñ 3: ĞŸĞ°Ğ¹Ğ¿-Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸

```bash
# ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ²ÑĞµ Ğ½ĞµĞ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ¿Ğ¾ Rust Ğ¸ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ "high"
omniscope search --dsl "#rust status:unread" --json \
  | jq -r '.data.items[].id' \
  | xargs -I{} omniscope book update {} \
      --set "organization.priority=high" \
      --json

# Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº ĞºĞ½Ğ¸Ğ³ Ñ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¾Ğ¼ 5 Ğ² markdown
omniscope search --dsl "r:5" --json \
  | jq -r '.data.items[] | "- **\(.metadata.title)** (\(.metadata.year)) by \(.metadata.authors | join(", "))"'

# ĞœĞ°ÑÑĞ¾Ğ²Ğ°Ñ AI-Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ Ğ½ĞµĞ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… ĞºĞ½Ğ¸Ğ³ Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ¾Ğ¼
omniscope search --dsl "NOT has:summary" --json \
  | jq -r '.data.items[].id' \
  | xargs -P 4 -I{} omniscope ai index {} --json
```

### 18.5 Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸ (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¾Ğ²)

#### Claude Code (`.claude/commands/omniscope.md`)

```markdown
## Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¾Ğ¹ omniscope

Ğ”Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¾Ğ¹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ CLI `omniscope`.
Ğ’ÑĞµĞ³Ğ´Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞ¹ Ñ„Ğ»Ğ°Ğ³ `--json` Ğ´Ğ»Ñ Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ°.

### Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸:
\`omniscope library map --json\`

### ĞŸĞ¾Ğ¸ÑĞº ĞºĞ½Ğ¸Ğ³Ğ¸:
\`omniscope search --dsl "<query>" --json\`

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ñƒ:
\`omniscope book add --title "..." --author "..." --tag ... --json\`

### ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ:
\`omniscope book update <id> --set "field=value" --json\`

### AI-Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ:
\`omniscope ai index <id> --json\`
```

#### Gemini CLI (`.gemini/config.yaml`)

```yaml
tools:
  - name: omniscope
    description: "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğ¹ ĞºĞ½Ğ¸Ğ¶Ğ½Ğ¾Ğ¹ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¾Ğ¹"
    commands:
      search: "omniscope search --dsl '{query}' --json"
      get_context: "omniscope library map --json"
      add_book: "omniscope book add --json-stdin"
      update: "omniscope book update {id} --json-stdin"
      ai_index: "omniscope ai index {id} --json"
```

#### MCP Server ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ (Ğ´Ğ»Ñ Claude Desktop)

```json
{
  "mcpServers": {
    "omniscope": {
      "command": "omniscope",
      "args": ["mcp", "start"],
      "env": {
        "ANTHROPIC_API_KEY": "${ANTHROPIC_API_KEY}"
      }
    }
  }
}
```

### 18.6 ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

```bash
# Ğ’ÑĞµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿ĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼Ñ‹ Ñ‡ĞµÑ€ĞµĞ· env (Ğ²Ğ°Ğ¶Ğ½Ğ¾ Ğ´Ğ»Ñ CI Ğ¸ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²)

omniscope_LIBRARY_PATH=/custom/path  # ĞŸÑƒÑ‚ÑŒ Ğº Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞµ
omniscope_CONFIG=/custom/config.toml # ĞŸÑƒÑ‚ÑŒ Ğº ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ñƒ
omniscope_NO_COLOR=1                 # ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ñ†Ğ²ĞµÑ‚Ğ° Ğ² Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğµ
omniscope_JSON=1                     # Ğ’ÑĞµĞ³Ğ´Ğ° --json (Ğ±ĞµĞ· Ñ„Ğ»Ğ°Ğ³Ğ°)
omniscope_AI_PROVIDER=anthropic      # ĞŸĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ AI Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€
omniscope_AI_MODEL=claude-3-5-sonnet # ĞŸĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ
ANTHROPIC_API_KEY=...             # API ĞºĞ»ÑÑ‡ Anthropic
OPENAI_API_KEY=...                # API ĞºĞ»ÑÑ‡ OpenAI
omniscope_SERVER_TOKEN=...           # Ğ¢Ğ¾ĞºĞµĞ½ ÑĞµÑ€Ğ²ĞµÑ€Ğ° ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
omniscope_PERF=1                     # Ğ¢Ñ€Ğ°ÑÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
omniscope_TIMING=1                   # Ğ¢Ğ°Ğ¹Ğ¼Ğ¸Ğ½Ğ³ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°
omniscope_LOG=debug                  # Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
```

---

*Ğ­Ñ‚Ğ¾Ñ‚ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ â€” Ğ¶Ğ¸Ğ²Ğ¾Ğ¹ Ğ¿Ğ»Ğ°Ğ½. ĞŸĞ¾ Ğ¼ĞµÑ€Ğµ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ ĞºĞ°Ğ¶Ğ´Ğ°Ñ Ñ„Ğ°Ğ·Ğ° Ğ¿Ñ€ĞµĞ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ÑÑ Ğ² ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ² IDE.*
